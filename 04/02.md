### âœï¸ Tangxt â³ 2021-03-13 ğŸ·ï¸ React

# 02-React ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶

## â˜…å…ƒç´  vs ç»„ä»¶

1ï¼‰å…ƒç´ ä¸ç»„ä»¶

![å…ƒç´ ä¸ç»„ä»¶](assets/img/2021-03-15-11-10-46.png)

2ï¼‰ä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Ÿ

![ç»„ä»¶](assets/img/2021-03-15-11-13-12.png)

- å°±ç›®å‰çš„ React ç‰ˆæœ¬è€Œè¨€ï¼Œä¸€ä¸ªè¿”å›äº† React å…ƒç´ çš„**å‡½æ•°**å°±æ˜¯**ç»„ä»¶**
- è€Œ Vue -> ä¸€ä¸ªæ„é€ é€‰é¡¹å³ä¸€ä¸ªç»„ä»¶

3ï¼‰React ä¸¤ç§ç»„ä»¶

å‡½æ•°ç»„ä»¶ï¼š

![å‡½æ•°ç»„ä»¶](assets/img/2021-03-15-11-18-29.png)

ç±»ç»„ä»¶ï¼š

![ç±»ç»„ä»¶](assets/img/2021-03-15-11-20-45.png)

## â˜…æ ‡ç­¾ä¼šè¢«ç¿»è¯‘ä¸º `React.createElement`

1ï¼‰Welcome æ ‡ç­¾

![Welcome](assets/img/2021-03-16-11-54-37.png)

å¦‚ï¼š

![babel-online](assets/img/2021-03-16-11-57-59.png)

2ï¼‰`React.createElement` çš„é€»è¾‘

![react å…ƒç´ ](assets/img/2021-03-16-12-03-39.png)

é¢˜å¤–è¯ï¼šå†™ç±»ç»„ä»¶æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå› ä¸ºæ¯æ¬¡ä½ éƒ½å¾—å†™ä¸€äº›å¾ˆå›ºå®šçš„ä¸œè¥¿ï¼š

![ç±»ç»„ä»¶](assets/img/2021-03-16-12-11-43.png)

## â˜…å°è¯•ç‰›åˆ€ï¼Œè¯·åŠ¨æ‰‹å°è¯•

éœ€æ±‚ï¼š

1. div -> çˆ¸çˆ¸ -> `Father`ç»„ä»¶
   1. div -> å„¿å­ -> `Son`ç»„ä»¶
      1. button -> +1 -> n+1
      2. span -> n
      3. div -> å­™å­ -> `Grandson`ç»„ä»¶
         1. button -> +1 -> n+1
         2. span -> n

å®ç°ï¼š

``` jsx
import React from "react";
import ReactDOM from "react-dom";

import "./styles.css";

function App() {
  return (
    <div className="App">
      çˆ¸çˆ¸
      <Son />
    </div>
  );
}

// å„¿å­ç»„ä»¶
class Son extends React.Component {
  constructor() {
    super();
    this.state = {
      n: 0
    };
  }
  add() {
    // this.state.n += 1 ä¸ºä»€ä¹ˆä¸è¡Œ
    this.setState({ n: this.state.n + 1 });
  }
  render() {
    return (
      <div className="Son">
        å„¿å­ n: {this.state.n}
        <button onClick={() => this.add()}>+1</button>
        <Grandson />
      </div>
    );
  }
}

// å­™å­ç»„ä»¶
const Grandson = () => {
  const [n, setN] = React.useState(0);
  return (
    <div className="Grandson">
      å­™å­ n:{n}
      <button onClick={() => setN(n + 1)}>+1</button>
    </div>
  );
};

//è·å–é¡µé¢ä¸Šéœ€è¦æ¸²æŸ“çš„ä½ç½®
const rootElement = document.getElementById("root");
ReactDOM.render(<App />, rootElement);
```

è§£æï¼š

App ç»„ä»¶ï¼š

![App ç»„ä»¶](assets/img/2021-03-16-13-20-42.png)

Son ç»„ä»¶ï¼š

![Son ç»„ä»¶](assets/img/2021-03-16-13-23-02.png)

Grandson ç»„ä»¶ï¼š

![å­™å­ç»„ä»¶](assets/img/2021-03-16-13-24-30.png)

Grandson çš„åŸç†ï¼š

`0` å°±æ˜¯ `state` çš„åˆå§‹å€¼

è¿™è¡Œä»£ç ï¼š

``` js
const [n, setN] = React.useState(0)
```

ç­‰ä»·äºï¼š

``` js
const array = React.useState(0)
const n = array[0]
const setN = array[1]
```

æˆ‘ä»¬ç”¨äº†ææ„å†™æ³•ï¼šå£°æ˜ä¸€ä¸ª`state`åˆå§‹å€¼ä¸º `0`ï¼Œç”¨ `n` ä»£è¡¨ `0`ï¼Œç”¨ `setN` å»å¯¹ `0` è¿›è¡Œä¿®æ”¹ï¼ˆå¯¹ä¸€ä¸ªå˜é‡çš„è¯»å’Œå†™æ“ä½œï¼‰

æ³¨æ„ï¼š

> `setN`ä¹‹åå¾—åˆ°çš„æ˜¯ä¸€ä¸ªæ–°çš„`n`ï¼Œè€Œä¸æ˜¯æ”¹å˜åŸæœ‰çš„`n`

ğŸ’¡ï¼šä¸ºä»€ä¹ˆ`const`å£°æ˜çš„å˜é‡`n`èƒ½è¢«æ”¹å€¼ï¼Ÿ`setN`åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ

![const å˜é‡](assets/img/2021-03-16-13-47-09.png)

â¹ï¼š[ä¸ºä»€ä¹ˆuseStateå¯ä»¥ä½¿ç”¨constè§£æ„èµ‹å€¼ï¼Ÿ_é«˜æ¡¥é“ä»”çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/weixin_45221036/article/details/108581908)

â¹ï¼š[useState çš„åŸç†åŠæ¨¡æ‹Ÿå®ç° â€”â€” React Hooks ç³»åˆ—ï¼ˆä¸€ï¼‰ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/100714485)

## â˜…ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ä½¿ç”¨ `props`

1ï¼‰æ·»åŠ  propsï¼ˆå¤–éƒ¨æ•°æ®ï¼‰

![props](assets/img/2021-03-16-17-20-18.png)

``` jsx
import React from "react";
import ReactDOM from "react-dom";

import "./styles.css";

function App() {
  return (
    <div className="App">
      çˆ¸çˆ¸
      <Son messageForSon="å„¿å­ä½ å¥½" />
    </div>
  );
}

class Son extends React.Component {
  render() {
    return (
      <div className="Son">
        æˆ‘æ˜¯å„¿å­ï¼Œæˆ‘çˆ¸å¯¹æˆ‘è¯´ã€Œ{this.props.messageForSon}ã€
        <Grandson messageForGrandson="å­™è´¼ä½ å¥½" />
      </div>
    );
  }
}

const Grandson = props => {
  return (
    <div className="Grandson">
      æˆ‘æ˜¯å­™å­ï¼Œæˆ‘çˆ¸å¯¹æˆ‘è¯´ã€Œ{props.messageForGrandson}ã€
    </div>
  );
};

const rootElement = document.getElementById("root");
ReactDOM.render(<App />, rootElement);
```

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-03-16-17-26-02.png)

è§£æï¼š

ğŸ’¡ï¼šçˆ¸çˆ¸ç»„ä»¶å¦‚ä½•ä¼ æ•°æ®ç»™å„¿å­ï¼Ÿ

ç›´æ¥åœ¨å„¿å­ç»„ä»¶æ ‡ç­¾ä¸Šå†™å±æ€§ï¼š

![å±æ€§](assets/img/2021-03-16-17-24-18.png)

å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£å°±æ˜¯`"xxx"`ï¼Œå¦‚æœæ˜¯å˜é‡ï¼Œé‚£å°±`{xxx}`

ğŸ’¡ï¼šå„¿å­æ€ä¹ˆæ¥æ”¶çˆ¸çˆ¸ä¼ è¿‡æ¥çš„æ•°æ®ï¼Ÿ

ç±»ç»„ä»¶ç›´æ¥ç”¨`this.props.xxx`ï¼š

![ç±»ç»„ä»¶](assets/img/2021-03-16-17-29-44.png)

å‡½æ•°ç»„ä»¶åˆ™æ˜¯ã€Œç¬¬ä¸€ä¸ªå‚æ•°çš„`xxx`ã€ï¼š

![å‡½æ•°ç»„ä»¶](assets/img/2021-03-16-17-32-23.png)

> ä¹Ÿå¯ä»¥ç”¨ææ„è¯­æ³•`{xxx}`

## â˜…ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ä½¿ç”¨ `state`ï¼ˆå†…éƒ¨æ•°æ®ï¼‰

> ä¼ é€’çš„æ˜¯å†…éƒ¨æ•°æ® -> `state` -> éµå®ˆä¸å¯å˜æ•°æ®ç†è®ºï¼





