### âœï¸ Tangxt â³ 2020-12-26 ğŸ·ï¸ react ç»„ä»¶

# 02-ç»„ä»¶çš„è¯ç”Ÿ

## â˜…è¯¾ä»¶

ä»£ç ï¼š<http://jsbin.com/nezocuk/2/edit?html,js,output>

* ç®€å•ç»„ä»¶ç”¨å‡½æ•°
  * ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ props
* å¤æ‚ç»„ä»¶ç”¨ class
  * constructor(props) super(props)
  * this.state
  * this.setState()
  * render

## â˜…å‡½æ•°ç»„ä»¶å’Œ class ç»„ä»¶

ä¸Šä¸€èŠ‚é‡Œè¾¹çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ç»„ä»¶å°±èƒ½å®ç°äº†ã€‚æ¥ä¸‹æ¥ï¼Œå°±è®²è®²**æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ç»„ä»¶**ï¼

### <mark>1ï¼‰ä¸ºä»€ä¹ˆéœ€è¦ç»„ä»¶ï¼Ÿ</mark>

åšä¸€ä¸ªæ€æƒ³æ¨è®ºï¼š

ä¹‹å‰æˆ‘ä»¬åšäº†ä¸€ä¸ªç®€å•çš„`+1/-1`éœ€æ±‚ï¼Œè€Œç°åœ¨æˆ‘ä»¬è¦æä¸€ä¸ªæ·˜å®é¦–é¡µï¼Œæˆ‘ä»¬çŸ¥é“æ·˜å®é¦–é¡µæ˜¯å¾ˆå¤æ‚çš„ï¼Œæœ‰å¾ˆå¤šå…ƒç´ æ ‡ç­¾ï¼Œäºæ˜¯ä¸€ä¸ªå˜æ€çš„ç°è±¡å°±å‡ºç°äº†ï¼š

![å˜æ€çš„ç°è±¡](assets/img/2020-12-29-19-32-52.png)

> `+1/-1`ä½œä¸ºä¸€å—ï¼Œå›¾ä¸­ï¼Œå¾—åŠ ä¸ª`<div></div>`åŒ…è£¹é‚£ä¸‰ä¸ªå…ƒç´ ï¼Œä»¥ä¾¿æ„Ÿå®˜ä¸Šçœ‹èµ·æ¥è¿™æ˜¯ä¸€ä¸ªç»„ä»¶ä¹‹ç±»çš„ä¸œè¥¿â€¦â€¦

ä¸ºå•¥æˆ‘ä»¬è¿™æ ·å†™è§‰å¾—å¾ˆä¸‘ï¼Œè€Œåœ¨ HTML é‡Œè¾¹ä¹Ÿæ˜¯å†™æ ‡ç­¾ï¼Œä½†å¹¶ä¸è§‰å¾—ä¸‘å‘¢ï¼Ÿ

å› ä¸ºè¿™æ˜¯ä¸€ä¸ªå®¡ç¾çš„å€¾å‘å•Šï¼åœ¨ JS é‡Œè¾¹ï¼Œæˆ‘ä»¬å´‡å°šæ¯ä¸ªæ–‡ä»¶ä¸è¦é‚£ä¹ˆå¤æ‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬èƒ½å¦æœ‰ä¸€ç§åŠæ³•å¯ä»¥æŠŠå®ƒä»¬åˆ’åˆ†æˆä¸€å—ä¸€å—ä¸œè¥¿å‘¢ï¼Ÿ

äºæ˜¯ï¼ŒReact ä½œè€…å°±æƒ³ã€Œä»€ä¹ˆä¸œè¥¿å¯ä»¥æŠŠä¸€äº›ä¸œè¥¿ç»™åŒ…èµ·æ¥å‘¢ï¼Ÿã€

> æœ€ç®€å•çš„åŒ…èµ·æ¥çš„ä¸œè¥¿å°±æ˜¯ä¸€ä¸ªã€Œå‡½æ•°ã€

### <mark>2ï¼‰å‡½æ•°ç»„ä»¶</mark>

å®šä¹‰ä¸€ä¸ª `App` å‡½æ•°ï¼ˆAppï¼Œåº”ç”¨ä¹‹æ„ï¼Œè¡¨ç¤ºæˆ‘ä»¬æ•´ä¸ªåº”ç”¨çš„æ‰€æœ‰ä»£ç ï¼‰ï¼Œè¯¥å‡½æ•°ä»€ä¹ˆä¹Ÿä¸åšï¼Œå°±è¿”å›ä¸€ä¸ª JSX è¯­æ³•çš„è™šæ‹Ÿ DOM

``` jsx
function App() {
  return (
    <div className="parent">
      <span className="tag">{number}</span>
      <button className="button is-primary" onClick={onClickButton}>
        +
      </button>
      <button className="button is-primary" onClick={onClickButton2}>
        -
      </button>
    </div>
  );
}
```

> `App()`çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯é‚£ä¸ªè™šæ‹Ÿ DOM

æ³¨æ„ç‚¹ï¼š`return` åè¾¹ä¸èƒ½å›è½¦

![ä¸èƒ½åŠ å›è½¦](assets/img/2020-12-29-20-11-34.png)

> åŠ ä¸ª`()`å°±èƒ½å›è½¦äº†ï¼

ä½¿ç”¨è¿™ä¸ª `App` ç»„ä»¶ï¼Œæœ‰ä¸¤ç§å§¿åŠ¿ï¼š

ç¬¬ä¸€ç§ï¼šåŸç”Ÿ JS å§¿åŠ¿

``` js
function render() {
  let h = React.createElement
  ReactDOM.render(
    h(App),
    document.querySelector("#app")
  );
}
```

ç¬¬äºŒç§ï¼šJSX å§¿åŠ¿

``` js
function render() {
  ReactDOM.render(
    <App />,
    document.querySelector("#app")
  );
}
```

è¿™ä¸¤ç§å§¿åŠ¿æ˜¯ä¸€æ ·çš„æ•ˆæœâ€¦â€¦åªæ˜¯åè€…æ›´ç®€å•ä¸€ç‚¹â€¦â€¦

---

æ•´ä½“ä¸Šçœ‹ï¼Œæˆ‘ä»¬æŠŠæ•´ä¸ªé¡µé¢æ”¾åˆ°ä¸€ä¸ªå«`App`çš„å‡½æ•°é‡Œè¾¹ï¼Œç„¶åå†æŠŠè¿™ä¸ªå‡½æ•°å½“ä½œæ˜¯ã€Œæ ‡ç­¾ã€æ¥ç”¨ï¼Œå½“ç„¶ï¼Œè¿™å®é™…ä¸Šå¹¶ä¸æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼

![æ ‡ç­¾](assets/img/2020-12-29-20-27-06.png)

`App`è¿™ä¸ªæ ‡ç­¾æ‰€è¡¨ç¤ºçš„å°±æ˜¯ä¸Šè¾¹é‚£ä¸ªè¿”å›å€¼`div`æ ‡ç­¾ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬çš„ä»£ç å°±æœ‰**æ›´å¤šçš„å¯èƒ½æ€§**äº†â€¦â€¦æ¯”å¦‚å„ç§ç»„ä»¶æ ‡ç­¾åµŒå¥—èµ·æ¥ï¼Œç„¶åå†`ReactDOM.render`ä¸€ä¸‹

### <mark>3ï¼‰åœ¨ä¸€ä¸ªç»„ä»¶é‡Œè¾¹ä½¿ç”¨å¦ä¸€ä¸ªç»„ä»¶</mark>

> æ ¹å…ƒç´ ä¸èƒ½å†™ä¸¤ä¸ªå…ƒç´ ï¼Œè¿™æ˜¯æ¡†æ¶çš„æ¯›ç—…â€¦â€¦

``` jsx
function App() {
  // æ ¹å…ƒç´ ä¸èƒ½å†™ä¸¤ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥éœ€è¦ç”¨ä¸€ä¸ªå…ƒç´ åŒ…è£¹ä½
  return (
    <div>
      <Box1 />
      <Box2 />
    </div>
  );
}

function Box1() {
  return (
    <div className="parent">
      <span className="tag">{number}</span>
      <button className="button is-primary" onClick={onClickButton}>
        +
      </button>
      <button className="button is-primary" onClick={onClickButton2}>
        -
      </button>
    </div>
  )
}
function Box2() {
  return (
    <div className="parent">
      <span className="tag">{number}</span>
      <button className="button is-primary" onClick={onClickButton}>
        +
      </button>
      <button className="button is-primary" onClick={onClickButton2}>
        -
      </button>
    </div>
  )
}

function render() {
  ReactDOM.render(
    <App />, // React.createElement(App)
    document.querySelector("#app")
  );
}
```

ä½¿ç”¨ Babel è½¬è¯‘çš„ç»“æœï¼š

``` js
"use strict";

function App() {
  return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(Box1, null), /*#__PURE__*/React.createElement(Box2, null));
}

function Box1() {
  return /*#__PURE__*/React.createElement("div", {
    className: "parent"
  }, /*#__PURE__*/React.createElement("span", {
    className: "tag"
  }, number), /*#__PURE__*/React.createElement("button", {
    className: "button is-primary",
    onClick: onClickButton
  }, "+"), /*#__PURE__*/React.createElement("button", {
    className: "button is-primary",
    onClick: onClickButton2
  }, "-"));
}

function Box2() {
  return /*#__PURE__*/React.createElement("div", {
    className: "parent"
  }, /*#__PURE__*/React.createElement("span", {
    className: "tag"
  }, number), /*#__PURE__*/React.createElement("button", {
    className: "button is-primary",
    onClick: onClickButton
  }, "+"), /*#__PURE__*/React.createElement("button", {
    className: "button is-primary",
    onClick: onClickButton2
  }, "-"));
}

function render() {
  ReactDOM.render( /*#__PURE__*/React.createElement(App, null), // React.createElement(App)
  document.querySelector("#app"));
}
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç”¨ JSX è¯­æ³•å†™çš„ä»£ç ï¼Œéƒ½æ˜¯è™šæ‹Ÿ DOMï¼Œå’©æœ‰çœŸæ­£çš„ DOM

`React.createElement`å‘ç°ä½ ç»™çš„`Box1`å‚æ•°æ˜¯ä¸ªå‡½æ•°çš„è¯ï¼Œå°±ä¼šå»æ‰§è¡Œè¿™ä¸ª`Box1`å‡½æ•°ï¼ŒæŠŠè¿”å›çš„ç»“æœï¼Œæ›¿æ¢æ‰`Box1`è¿™ä¸ªå‚æ•°ï¼

ä»¥ä¸Šå°±æ˜¯å…³äºç»„ä»¶çš„ç¬¬ä¸€ä¸ªæ„æƒ³äº†ï¼Œå³æŠŠä¸€å †æ ‡ç­¾ç”¨ä¸€ä¸ªå‡½æ•°åŒ…èµ·æ¥å†`return`å‡ºå»ï¼Œè€Œè¿™ä¸ªå‡½æ•°åå°±ä»£è¡¨ç€è¿™ä¸€å †æ ‡ç­¾ -> **ç»„ä»¶çš„ç¬¬ä¸€ä¸ªèŒèŠ½æƒ³æ³•**ï¼

äº†è§£äº†è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åšå¾ˆå¤æ‚çš„é¡µé¢äº†ï¼Œè€Œä¸”å„ç»„ä»¶ä¹‹é—´ä¸å—å½±å“ï¼ -> ç”¨ ES6 çš„æ¨¡å—è¯­æ³•ï¼Œ`export/import`ä¸€ä¸ªå‡½æ•°å°±å¥½äº†ï¼

åšä¸€ä¸ªæ ‘å½¢ç»“æ„çš„é¡µé¢ï¼š

``` jsx
function App() {
  return (
    <div>
      <TopBar />
      <Ad />
      <Floors />
    </div>
  )
}
```

æ¯ä¸ªç»„ä»¶æ ‡ç­¾éƒ½å¯¹åº”ç€ä¸€ä¸ªå‡½æ•°ï¼Œè€Œè¿™äº›å‡½æ•°åˆ`return`å…¶å®ƒçš„æ ‡ç­¾ï¼Œé™¤æ­¤åµŒå¥—ä¸‹å»â€¦â€¦

æœ‰äº†å…³äºç»„ä»¶æœ€åŸºæœ¬çš„æƒ³æ³•ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åŸå…ˆçš„éœ€æ±‚åŠ ä¸€äº›å°åŠŸèƒ½ï¼

> å­¦ä¹ çš„æ—¶å€™ä¸è¦çº ç»“ç»†èŠ‚ï¼Œè¯·æŠŠè¿™ä¸ªä¸œè¥¿çš„å¤§ä½“è„‰ç»œå­¦å®Œå†è¯´ï¼ä¸ç„¶ï¼Œä½ å°±å­¦ä¸å¾€è¿™ä¸ªä¸œè¥¿äº†ï¼

### <mark>4ï¼‰ç»™å‡½æ•°ç»„ä»¶ä¼ å‚</mark>

å‡½æ•°ç»„ä»¶æ€»å¾—æœ‰è‡ªå·±çš„çŠ¶æ€å§ï¼æ€»ä¸èƒ½å…¬ç”¨ä¸€ä¸ªå…¨å±€çŠ¶æ€å§ï¼ä¸ç„¶ï¼Œä½ ä¸€åŠ¨`number`ï¼Œå…¶å®ƒç»„ä»¶ä¹ŸåŠ¨äº†â€¦â€¦

è¿™æ ·åŠ å‚æ•°ï¼Ÿ

![å±æ€§](assets/img/2020-12-29-23-39-26.png)

React çš„è®¾è®¡ï¼šæŠŠå†™åœ¨`Box1`ä¸Šçš„æ‰€ä»¥å±æ€§å½’çº³æˆä¸€ä¸ªå¯¹è±¡ï¼

![å±æ€§å³æ˜¯å‚æ•°](assets/img/2020-12-29-23-43-45.png)

React ä½œè€…æœ‰ä¸¤ä¸ªåˆ›ä¸¾ï¼š

1. è™šæ‹Ÿ DOM
2. æ ‡ç­¾å°±æ˜¯å‡½æ•°ï¼Œå‡½æ•°å°±æ˜¯å¯¹è±¡ï¼Œæ ‡ç­¾çš„å±æ€§å°±æ˜¯å‡½æ•°çš„å‚æ•°

å¯ä»¥çœ‹åˆ°ï¼ŒReact ä½œè€…è¿™ç§æƒ³æ³•æ‰€æå‡ºæ¥çš„æ•ˆæœæ˜¯éå¸¸ç®€æ´çš„ï¼Œæ²¡æœ‰ä»»ä½•å¤æ‚çš„ä¸œè¥¿ -> **æ‰€æœ‰ä¸œè¥¿éƒ½å˜æˆä¸€ä¸ªå‡½æ•°å’Œå‚æ•°**ï¼

è¯è¯´ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½ç»™`Box1`å’Œ`Box2`å„è‡ªä¼ ä¸€ä¸ª`number`å±æ€§å‘¢ï¼Ÿ

è¿™æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸º React è§„å®šäº†ä¸€ä¸ªäº‹æƒ…ï¼š**ä¸å…è®¸ä½ ä¿®æ”¹åˆ«äººä¼ ç»™ä½ çš„å‚æ•°**ã€‚

æ‰€æœ‰ï¼Œ`Box1`è¿™ä¸ªå‡½æ•°åªèƒ½æ¥å—`name`ï¼Œä¸èƒ½æ”¹è¿™ä¸ª`name`çš„å€¼ï¼Œå¦‚ï¼š

![æ”¹ä¼ è¿‡çš„å€¼](assets/img/2020-12-29-23-50-09.png)

å½“ç„¶ï¼Œä½ æ”¹äº†æ§åˆ¶å°ä¹Ÿä¸ä¼šè­¦å‘Šä½ ï¼Œä¸è¿‡ï¼Œä½ æœ€å¥½ä¸è¦æ”¹ï¼Œå› ä¸ºæŒ‰ç…§èŠ³èŠ³çš„ã€Œç»éªŒã€æ¥è¯´ï¼Œè¿™æ ·çš„ä»£ç å¾ˆå®¹æ˜“å‡º bugï¼

æ€»ä¹‹ï¼Œã€Œ**è¯·æ°¸è¿œä¸è¦ä¿®æ”¹åˆ«äººç»™ä½ ä¼ çš„å±æ€§**ã€ï¼å¦‚æœä¿®æ”¹äº†ï¼Œåæœè‡ªè´Ÿï¼ˆè‚¯å®šä¼šå‡ºç° bug çš„ï¼Œbug æ˜¯å•¥ï¼Ÿå¯èƒ½ç›®å‰ä½ è¿™æ ·åšçš„è¿™å¤©ä½ ä¸çŸ¥é“ï¼Œä½†è¿‡äº†å‡ ä¸ªæ˜ŸæœŸï¼Œå‡ ä¸ªæœˆï¼Œå°±ä¼šå‡ºç°æ— å˜å¤´çš„ bug äº†ï¼‰â€¦â€¦

å›è¿‡å¤´æ¥çœ‹ï¼Œæˆ‘ä»¬çš„éœ€æ±‚ï¼š

![éœ€æ±‚](assets/img/2020-12-29-23-54-46.png)

æœ´ç´ çš„æƒ³æ³•ï¼š

![ä¸å¥½çš„æ–¹æ¡ˆ](assets/img/2020-12-29-23-57-06.png)

ç”¨è¿™ç§æ–¹æ¡ˆæ¥é˜»éš”è¿™ä¸¤ä¸ªç»„ä»¶ï¼Œåˆ°åº•æ˜¯å¥½è¿˜æ˜¯ä¸å¥½å‘¢ï¼Ÿ

æ˜¾ç„¶æ˜¯ä¸å¥½çš„ï¼å¦‚æˆ‘è¦æ 100 ä¸ªè¿™æ ·çš„ç»„ä»¶ï¼Œæˆ‘å²‚ä¸æ˜¯è¦å£°æ˜ 300 ä¸ªå…¨å±€å˜é‡ï¼Ÿ -> æˆ‘ç–¯äº†æ‰è¿™æ ·æï¼

æ‰€ä»¥å’‹åŠå‘¢ï¼Ÿ

ç›®å‰ï¼Œæˆ‘ä»¬çŸ¥é“ï¼š

1. ä¸èƒ½ä¿®æ”¹ä¼ è¿‡æ¥çš„å±æ€§ï¼Œäºæ˜¯ç”¨äº†å…¨å±€å˜é‡
2. æ€»æ˜¯ç”¨å˜é‡çš„è¯ï¼Œå¤–é¢çš„å˜é‡ä¼šè¶Šæ¥è¶Šå¤šï¼Œæœ€åè†¨èƒ€ï¼Œæ•´ä¸ªé¡µé¢çœ‹ä¸Šå»æœ‰å‡ ç™¾ä¸ªå˜é‡ï¼Œéƒ½æä¸æ‡‚è¿™ä¸ªå˜é‡æ˜¯ä¸“å±äºå“ªä¸ªå‡½æ•°ç»„ä»¶ä½¿ç”¨çš„äº†â€¦â€¦

å‡çº§ç‰ˆï¼š

JS é‡Œè¾¹æœ‰ä»€ä¹ˆä¸œè¥¿æ—¢èƒ½æ»¡è¶³å‡½æ•°çš„åŠŸèƒ½ï¼Œåˆèƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ä½œç”¨åŸŸå‘¢ï¼Ÿ -> åœ¨å‡½æ•°é‡Œå£°æ˜å˜é‡ä¸å°±å¥½äº†å—ï¼Ÿ

![ç§æœ‰å˜é‡](assets/img/2020-12-30-00-05-29.png)

ç„¶è€Œï¼Œå†ç‚¹å‡»çš„æ—¶å€™æ²¡æœ‰ä»»ä½•æ˜æ˜¾çš„ååº”ï¼š

![æ²¡æœ‰å˜åŒ–](assets/img/2020-12-30-00-11-00.png)

ç©¶å…¶åŸå› ï¼š

![åŸå› ](assets/img/2020-12-30-00-13-24.png)

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿™æ€è·¯å‡‰äº†å‘€ï¼ -> å‡½æ•°çš„åŠŸèƒ½è¿‡äºå•ä¸€äº†ï¼Œæ‰€ä»¥æ˜¯å¦è€ƒè™‘ä½¿ç”¨ class å‘¢ï¼Ÿ

ç›®å‰æ¥çœ‹ï¼Œæˆ‘ä»¬ä¸€`render`å°±æ˜¯æ¸²æŸ“é‚£ä¸ª`App`ç»„ä»¶ï¼Œè€Œè¿™æ¸²æŸ“å°±ä¼šåˆå§‹åŒ–æ•´ä¸ªé¡µé¢äº†ï¼

æ‰€ä»¥æˆ‘ä»¬èƒ½å¦å±€éƒ¨`render`å‘¢ï¼Ÿè€Œä¸æ˜¯æŠŠæ•´ä¸ª`App`éƒ½ç»™`render`äº†ï¼

ç›®å‰è€ƒè™‘ä¸¤ä¸ªç‚¹ï¼š

1. ä¸èƒ½ç”¨å‡½æ•°äº†
2. ä¸èƒ½æ¯æ¬¡éƒ½`render`æ•´ä¸ª`App`äº†

äºæ˜¯ï¼Œæˆ‘ä»¬å°±ç”¨`class`äº†ï¼

### <mark>5ï¼‰class ç»„ä»¶</mark>

``` jsx
class App2 extends React.Component {
  render() { // å±€éƒ¨ render
    return (
      <div>App2</div>
    )
  }
}
render();
function render() {
  ReactDOM.render(
    <App2 />, // React.createElement(App)
    document.querySelector("#app")
  );
}
```

è¿™æ˜¯æœ€æœ€ç®€å•ç”¨ `class` æ„å»ºç»„ä»¶æ ‡ç­¾çš„æ–¹å¼ï¼

> `extends React.Component`æ˜¯å®˜æ–¹ç¤ºä¾‹çš„å†™æ³•â€¦â€¦éå¾—è¿™æ ·ç»§æ‰¿â€¦â€¦

æ¥å—å‚æ•°çš„å†™æ³•ï¼š

ä¹‹å‰æˆ‘ä»¬å†™å‡½æ•°ç»„ä»¶ï¼Œæ¥å—å‚æ•°ç›´æ¥`function App(props) {}`

> `props`è¿™ä¸ªå½¢å‚å‘½åæ˜¯çº¦å®šä¿—ç§°çš„ -> æŠŠæ¥å—åˆ°çš„å‚æ•°å«åš`props`

ä½¿ç”¨ `class` ç»„ä»¶çš„æ–¹å¼ï¼Œæ›´å¥½æ‹¿å‚æ•°ï¼š

``` js
class App2 extends React.Component {
  render() { // å±€éƒ¨ render
    return (
      <div>App2 {this.props.name}</div>
    )
  }
}
render();
function render() {
  ReactDOM.render(
    <App2 name="LeBron"/>, // React.createElement(App)
    document.querySelector("#app")
  );
}
```

ç›´æ¥`{this.props.name}`å°±è¡Œäº†ï¼Œä¹‹æ‰€ä»¥å¯ä»¥è¿™æ ·åšï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ç»§æ‰¿äº†`React.Component` -> `props`æ˜¯çˆ¶ç±»æ„é€ çš„ï¼

ğŸ’¡ï¼šæ•°å€¼ ä¸ å­—ç¬¦ä¸²ï¼Ÿ

![æ•°å€¼å’Œå­—ç¬¦ä¸²](assets/img/2020-12-30-01-20-05.png)

å…ƒç´ æ ‡ç­¾ä¸ŠåŠ å¼•å·çš„éƒ½æ˜¯å­—ç¬¦ä¸²å“ˆï¼

æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬ä¸èƒ½æ”¹`props`ï¼Œä½†è¿™ä¸ª `class` ç»„ä»¶èƒ½å¦æœ‰è‡ªå·±çš„å±€éƒ¨å˜é‡å‘¢ï¼Ÿ

è®¾ç½®å±€éƒ¨å˜é‡ï¼š

åœ¨`constructor`è®¾ç½® -> ä¸ºå•¥åœ¨è¿™é‡Œè®¾ç½®ï¼Ÿå› ä¸ºè¿™æ˜¯è§„å®šçš„ï¼æ‰€ä»¥æ²¡æœ‰ä¸ºä»€ä¹ˆâ€¦â€¦

æ–‡æ¡£è§„å®šï¼Œä½ è¦æŠŠå˜é‡æ”¾åˆ°`state`é‡Œè¾¹ -> ä¸èƒ½å†™`let`ä¹‹ç±»çš„ï¼Œæ¯•ç«Ÿåœ¨`class`é‡Œè¾¹ä½ åªèƒ½å†™å±æ€§æˆ–å‡½æ•°ï¼Œæ²¡æ³•çå†™â€¦â€¦

![æ–‡æ¡£è§„å®š](assets/img/2020-12-30-01-39-45.png)

æ³¨æ„ç‚¹ï¼š

- ä¸è¦åŠ æ‹¬å·ï¼Œå¦‚ä¸è¦å†™æˆè¿™æ ·`this.add()`ï¼Œå› ä¸ºè¿™æ˜¯éœ€è¦è½¬è¯‘çš„ï¼è€Œè½¬è¯‘çš„ç»“æœæ˜¯`add`å‡½æ•°çš„è¿”å›å€¼
- æˆ‘ä»¬è¿™æ ·è°ƒç”¨`add`å‡½æ•°ï¼š`this.add()`ï¼ŒæŒ‰ç…§ä»¥å‰å†™`class`çš„è®¤è¯†ï¼Œ`this.add`ï¼Œ`add`é‡Œè¾¹çš„`this`å°±æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹ï¼Œä½†åœ¨ React é‡Œè¾¹ï¼Œå®ƒåšäº†å¤„ç†ï¼Œå®ƒæŠŠ`this`é‡ç½®ä¸ºäº†`undefined`ï¼å³ React åœ¨è°ƒç”¨`add`æ—¶ï¼Œæ˜¯è¿™æ ·è°ƒç”¨çš„ï¼š`add.call(undefined)` -> æ€»ä¹‹ï¼ŒReact æ˜¯å¼ºåˆ¶æŠŠ`this`å˜ä¸º`undefined`ï¼Œè¿™æ˜¯æ•…æ„çš„ï¼

> æ¡†æ¶æœ‰å¾ˆå¤šè§„å®šï¼Œå°±æ˜¯è¦æŠŠä½ æ¡†æ­»ï¼

ä¸ºäº†èƒ½è®©`add`å‡½æ•°ä½“é‡Œè¾¹çš„`this`æŒ‡å‘`App2`çš„å®ä¾‹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§å§¿åŠ¿å¯ä»¥åšåˆ°ï¼š

1. ä½¿ç”¨`bind`ï¼š`{this.add.bind(this)}`
2. ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼š`{()=> this.add()}`

å¯é€‰æ‹©å“ªç§å§¿åŠ¿å‘¢ï¼Ÿ

èŠ³èŠ³é€‰æ‹©çš„æ˜¯ç¬¬ä¸€ç§ï¼Œå› ä¸ºå®ƒè¯­ä¹‰æ›´æ˜ç¡®å•Šï¼

å›è¿‡å¤´æ¥ï¼Œæˆ‘ä»¬æŒ‡å®šäº†`this`ï¼Œä½†æ•ˆæœå¹¶æ²¡æœ‰å‡ºæ¥ï¼š

![ä¾æ—§æ˜¾ç¤º 0](assets/img/2020-12-30-01-57-45.png)

ä¸ºå•¥æ²¡æœ‰æ•ˆæœå‘¢ï¼Ÿ

å› ä¸ºå®˜ç½‘è§„å®šï¼Œå¿…é¡»è¦ç”¨`this.setState`å»åšï¼

``` js
this.setState({
  number: this.state.number + 1
})
```

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2020-12-30-02-00-35.png)

å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶`class`çš„åŠŸèƒ½æ›´å¼ºå¤§ï¼Œä½†æ˜¯å®ƒçš„çº¦æŸæ¡ä»¶æ›´å¤šï¼

å¦‚æœä½ çš„ JS åŸºç¡€ä¸å¥½ï¼Œä½ åŸºæœ¬ç†è§£ä¸äº†å®ƒä¸ºå•¥æœ‰é‚£ä¹ˆå¤šé™åˆ¶â€¦â€¦

ä¸€ä¸ªå®Œæ•´çš„`class`ç»„ä»¶ï¼š

``` jsx
class App2 extends React.Component {
  constructor(props) {
    super(props)
    this.state = {
      number: 0
    }
  }
  add() {
    this.setState({
      number: this.state.number + 1
    })
  }
  minus() {
    this.setState({
      number: this.state.number - 1
    })
  }
  render() { // å±€éƒ¨ render
    return (
      <div>
        App2 {this.props.name} {this.props.age}
        <div>
          <span className="tag">{this.state.number}</span>
          <button className="button" onClick={this.add.bind(this)}>+1</button>
          <button className="button" onClick={()=>this.minus()}> -1</button>
        </div>
      </div>
    )
  }
}
```

ç”¨ `class` ç»„ä»¶å¿…é¡»è¦è®°ä½çš„ï¼š

1. å¿…é¡»ç»§æ‰¿ `React.Component`
2. `constructor`å¿…é¡»æ¥å—ä¸€ä¸ª`props`
3. å¿…é¡»åœ¨`constructor`é‡Œè¾¹å†™ä¸ª`super(props)` -> è¿™æ˜¯ JS è§„å®šçš„ï¼Œè¿™è¡¨ç¤ºè°ƒç”¨çˆ¶ç»„ä»¶çš„`constructor`
4. å¿…é¡»åœ¨`constructor`é‡Œè¾¹åˆå§‹åŒ–è¿™ä¸ª`state`ï¼Œä¸èƒ½åœ¨å…¶å®ƒåœ°æ–¹åˆå§‹åŒ–å®ƒï¼`state`è¿™ä¸ªå¯¹è±¡æ——ä¸‹çš„å±æ€§å°±æ˜¯ä½ èƒ½ç”¨çš„å˜é‡ï¼
5. äº‹ä»¶å¯ä»¥æ”¾åœ¨ä¸`constructor`åŒçº§çš„ä½ç½®
6. å¿…é¡»è¦æœ‰ä¸€ä¸ªå«`render`çš„å‡½æ•°ï¼Œè€Œä¸”è¿™ä¸ª`render`å‡½æ•°å¿…é¡»è¦è¿”å›ä¸€ä¸ªæ ‡ç­¾ï¼Œè€Œä¸”è¿™ä¸ªæ ‡ç­¾å¿…é¡»åªæœ‰ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œä¸èƒ½æœ‰ä¸¤ä¸ªï¼Œå½“ç„¶ï¼Œåæ¥ React å‡çº§äº†ï¼Œæ˜¯å¯ä»¥æ”¯æŒä¸¤ä¸ªçš„ï¼
   1. åœ¨æ ‡ç­¾é‡Œè¾¹æƒ³è¦`props`çš„è¯ï¼Œå¿…é¡»å¾—`this.props.xxx`è¿™æ · -> **å¤–è¾¹ä¼ è¿‡æ¥çš„**
   2. å¦‚æœæƒ³è¦`state`çš„è¯ï¼Œå¿…é¡»å¾—`this.state.zzz`è¿™æ · -> **è‡ªå·±ç»´æŠ¤çš„**
   3. äº‹ä»¶å¤„ç† -> å¦‚æœä½ è¦æŒ‡å®š`this`ï¼Œä½ å¾—è‡ªå·±å»ç»‘å®šï¼ŒReact å¯ä¸ä¼šå¸®ä½ å»åšï¼ï¼ˆä»¥å‰æ˜¯å¯ä»¥çš„ï¼Œä½†åæ¥æœ‰äººè¯´è¿™æ ·å¹¶ä¸å¥½ï¼Œäºæ˜¯å°±æ”¹æˆä¸å¸®ä½ ç»‘å®šäº†ï¼Œå³åªèƒ½è®©ä½¿ç”¨è€…è‡ªå·±å»åšäº†ï¼‰

> JS åŸºç¡€å¥½ï¼Œä¸éœ€è¦æ­»è®°ç¡¬èƒŒä¸Šè¾¹è¿™å‡ ç‚¹ï¼Œå¦åˆ™ï¼Œå°±æ­»è®°ç¡¬èƒŒå§ï¼

ä»¥ä¸Šè¿™ä¸ªä»£ç ï¼Œå°±æ˜¯ä¸€ä¸ªæœ€ç®€å•ã€æœ€ç®€å•çš„ React ç»„ä»¶ï¼

### <mark>6ï¼‰å›é¡¾æ•´ä¸ªè¿‡ç¨‹</mark>

1. ä¸€å¼€å§‹ç”¨å‡½æ•°ä»£æ›¿æ ‡ç­¾ï¼Œå‘ç°å®ƒæ˜¯å¾ˆç®€å•çš„ï¼Œä½†å…¶åŠŸèƒ½ä¸è¶³ï¼Œå¦‚ä¸èƒ½æœ‰å±€éƒ¨å˜é‡ï¼Œä¸èƒ½æœ‰å±€éƒ¨æ–¹æ³•ï¼Œäºæ˜¯æˆ‘ä»¬å°±ç”¨äº†`class`
2. `class`å§¿åŠ¿ -> æˆ‘ä»¬å¯ä»¥æœ‰å±€éƒ¨çš„å˜é‡ã€å±€éƒ¨çš„æ–¹æ³•ï¼Œè€Œä¸”è¿˜æœ‰ä¸€ä¸ªå±€éƒ¨çš„`render` -> **é‡ç‚¹æŠ“ä½æˆ‘è¦å±€éƒ¨ï¼Œä¸è¦å…¨å±€**

![å‡½æ•°ç»„ä»¶ vs class ç»„ä»¶](assets/img/2020-12-30-02-20-33.png)

### <mark>7ï¼‰å®Œæˆæˆ‘ä»¬çš„æœ€ç»ˆéœ€æ±‚</mark>

> å§‹ç»ˆè°¨è®°ï¼šæˆ‘ä»¬å†™çš„ JSX è¯­æ³•ä»£ç ï¼Œå¹¶ä¸æ˜¯åœ¨å†™æ ‡ç­¾ï¼Œè€Œæ˜¯åœ¨å†™è™šæ‹Ÿçš„ä¸€ä¸ªå¯¹è±¡ï¼Œåªä¸è¿‡è¿™ä¸ªå¯¹è±¡å¯ä»¥ç”¨æ ‡ç­¾æ¥è¡¨ç¤ºè€Œå·²ï¼

å†™ JSX è¯­æ³•ä»£ç çš„æ—¶ï¼Œä½ æ‰€æ·»åŠ çš„å±æ€§ï¼Œä½ å¾—è¿™æ ·ï¼š`onClick={()=>xxx()}`ï¼Œåƒä¸‡ä¸è¦å†™æˆæœ‰ç©ºæ ¼çš„è¿™æ ·ï¼š`onClick = {â€¦â€¦}`

``` jsx
class Box1 extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      number: 0,
    };
  }
  add() {
    this.setState({
      number: this.state.number + 1,
    });
  }
  minus() {
    this.setState({
      number: this.state.number - 1,
    });
  }
  render() {
    return (
      <div className="parent">
        æˆ‘çš„ name æ˜¯ {this.props.name}
        <span className="tag">{this.state.number}</span>
        <button className="button is-primary" onClick={this.add.bind(this)}>
          +1
        </button>
        <button className="button is-primary" onClick={this.minus.bind(this)}>
          -1
        </button>
      </div>
    );
  }
}
class Box2 extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      number: 0,
    };
  }
  add() {
    this.setState({
      number: this.state.number + 2,
    });
  }
  minus() {
    this.setState({
      number: this.state.number - 2,
    });
  }
  render() {
    return (
      <div className="parent">
        æˆ‘çš„ name æ˜¯ {this.props.name}
        <span className="tag">{this.state.number}</span>
        <button className="button is-primary" onClick={this.add.bind(this)}>
          +2
        </button>
        <button className="button is-primary" onClick={this.minus.bind(this)}>
          -2
        </button>
      </div>
    );
  }
}
function App(props) {
  return (
    <div>
      <Box1 name="Box1" />
      <Box2 name="Box2" />
    </div>
  );
}

function render() {
  ReactDOM.render(
    <App />, // React.createElement(App)
    document.querySelector("#app")
  );
}
render()
```

æ•ˆæœï¼š

![å®Œæˆéœ€æ±‚](assets/img/2020-12-30-15-28-21.png)

> Box1 å’Œ Box2 éƒ½æœ‰å„è‡ªç‹¬ç«‹çš„å±€éƒ¨å˜é‡ã€å±€éƒ¨æ–¹æ³•ã€å±€éƒ¨`render`

ğŸ’¡ï¼šæ”¹å˜`state`ï¼Œä¸ºå•¥ä¸æ˜¯è¿™æ ·å†™ï¼Ÿ

![state æ”¹å˜](assets/img/2020-12-30-14-04-25.png)

å¾ˆæ˜æ˜¾çš„çœ‹åˆ°ï¼Œä¸‹è¾¹è¿™ç§å§¿åŠ¿è¦æ›´å®¹æ˜“ç†è§£å•Šï¼

é—®é¢˜æ¥äº†ï¼Œä¸ºå•¥è¦å†™`setState`ï¼Ÿè€Œä¸æ˜¯æˆ‘ä»¬è‡ªå·±äº²è‡ªç›´æ¥æ”¹å˜`number`çš„å€¼ï¼Œç„¶åå†æ‰‹åŠ¨åœ°å»`render`å‘¢ï¼Ÿ

è¿™ä¸ªé—®é¢˜åœ¨é¢è¯•çš„æ—¶å€™ç»å¸¸ä¼šé—®åˆ°ï¼Œå¦‚`setState`æœ‰å•¥ä¼˜ç‚¹ï¼Ÿåˆæœ‰å•¥ç¼ºç‚¹ï¼Ÿ

ä¼˜ç‚¹ï¼š`setState`å¯ä»¥**å¯¹æ›´æ–°è¿›è¡Œä¼˜åŒ–**ï¼Œä¸ç„¶ï¼Œä½ å¾ˆæœ‰å¯èƒ½é¢‘ç¹åœ°è°ƒ`render`ï¼Œè¿™æ ·ä¸€æ¥é¡µé¢å°±å¾ˆå®¹æ˜“å¡äº†ï¼ï¼ˆå¤§æ‰¹é‡æ›´æ–°ï¼Œä¸€ç§’`render`åå‡ æ¬¡æ˜¯å¾ˆå®¹æ˜“å¡çš„ï¼‰

![render åå‡ æ¬¡](assets/img/2020-12-30-14-11-31.png)

è€Œ`setState`åˆ™ä¸ä¼šè¿™æ ·ï¼Œ**å®ƒä¼šå°†å¤§æ‰¹é‡çš„æ›´æ–°åˆå¹¶æˆä¸€æ¬¡æ›´æ–°**ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ä¸æ­¢ä¸€æ¬¡åœ°å»`setState`äº†

æ€»ä¹‹ï¼Œè‡ªå·±`render`å®¹æ˜“æŠŠè‡ªå·±ç»™å‘äº†ï¼Œè¿˜ä¸å¦‚æŠŠ`render`çš„è°ƒç”¨è¿‡ç¨‹äº¤ç»™`setState`å»æï¼ˆ`setState`çš„æºä»£ç é‡Œè¾¹æœ€ç»ˆè‚¯å®šä¼šæœ‰ä¸€æ­¥å»è°ƒç”¨`render`è¿™ä¸ªæ–¹æ³•çš„ï¼‰ -> React æ—¢ç„¶å¸®æˆ‘ä»¬æå®šäº†`render`ï¼Œé‚£å°±ä¸ç”¨å»ç®¡äº†ï¼React æ€ä¹ˆè¯´ï¼Œä½ å°±æ€ä¹ˆåšâ€¦â€¦

ğŸ’¡ï¼šåŒä¸€ä¸ªç»„ä»¶ç±»æå‡ºæ¥çš„æ ‡ç­¾æ˜¯ä¸€æ ·çš„å—ï¼Ÿ

``` jsx
let x = (<Box1 />)
let y = (<Box1 />)
console.log(x)
console.log(y)
console.log(x === y)
```

![ä¸ä¸€æ ·çš„ç»„ä»¶å®ä¾‹](assets/img/2020-12-30-15-32-02.png)

ğŸ’¡ï¼šæˆ‘ä»¬èƒ½å¦è¿™æ ·æ”¹å˜`number`çš„å€¼ï¼Ÿ

![ä¸¤æ¬¡è®¾ç½®å€¼](assets/img/2020-12-30-15-36-06.png)

æµ‹è¯•ç»“æœï¼š

![+1 æµ‹è¯•](assets/img/2020-12-30-15-39-08.png)

åŸå› æ˜¯ï¼š

![number](assets/img/2020-12-30-15-41-32.png)

> å›¾ä¸­çš„ä»£ç æ˜¯æˆ‘æµ‹è¯•ç¬¬äºŒæ¬¡`+3`çš„æƒ…å†µï¼Œç»“æœå°±æ˜¯ç‚¹ä¸€ä¸‹`+3`

è¿™æ˜¯æ‰¹é‡æ“ä½œçš„ï¼Œä¼šç­‰`number`æœ‰ç¡®åˆ‡å€¼åï¼Œæ‰å»`render`çš„ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯ä¸æ–­è¦†ç›–å‰ä¸€æ¬¡çš„å€¼ï¼Œå¯ä¸æ˜¯`setState`ä¸€æ¬¡é¡µé¢å°±`render`ä¸€æ¬¡â€¦â€¦

å¯æˆ‘å°±æ˜¯æƒ³è¦è¿™æ ·ä¸¤æ¬¡`+1`å•Šï¼Ÿ

é‚£ä¹ˆä½ å¯ä»¥è¿™æ ·åšï¼š

![ç®­å¤´å‡½æ•°ä½œä¸ºå‚æ•°](assets/img/2020-12-30-15-54-15.png)

ä½†`setState`æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œè¿™ä¸ªç®­å¤´å‡½æ•°å‚æ•°ï¼Œ`setState`å‡½æ•°ä½“å†…éƒ¨ä¼šä¼ ä¸€ä¸ªå‚æ•°ç»™å®ƒâ€¦â€¦

è¿›ä¸€æ­¥çš„æµ‹è¯•ï¼š

![æµ‹è¯• 2](assets/img/2020-12-30-16-04-36.png)

å†è¿›ä¸€æ­¥çš„æµ‹è¯•ï¼š

![æµ‹è¯• 3](assets/img/2020-12-30-16-21-35.png)

å¦‚æœå‚æ•°æ˜¯ç®­å¤´å‡½æ•°çš„è¯ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªç©ºæ ¼å°±ä¸æ˜¯åˆå§‹å€¼`0`äº†ï¼Œè€Œæ˜¯ä¸Šä¸€ä¸ªç©ºæ ¼å¾—åˆ°çš„`n`å€¼â€¦â€¦ -> è¿™åªæ˜¯æˆ‘ä¸ªäººä¸ºäº†ç†è§£çš„çŒœæµ‹â€¦â€¦

æ€»ä¹‹ï¼Œä¸ç®¡æ€æ ·ï¼Œæˆ‘ä»¬ä¸€èˆ¬åªå†™ä¸€ä¸ª`setState`ï¼Œè€Œä¸æ˜¯å†™ä¸¤ä¸ªã€ä¸‰ä¸ªâ€¦â€¦è¿™æ ·

ğŸ’¡ï¼šä»¥æ€æ ·çš„å§¿åŠ¿çœ‹å¾…è¿™ä¸ªä»£ç ï¼Ÿ

``` jsx
function App(props) {
  return (
    <div>
      <Box1 name="Box1" />
      <Box2 name="Box2" />
    </div>
  );
}
```

æ•´ä¸ªåº”ç”¨å«`App`ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨é¡µé¢ä¸Šè¦çœ‹åˆ°çš„å†…å®¹ï¼‰ï¼Œå®ƒé‡Œè¾¹æœ‰ä¸¤ä¸ªç›’å­ï¼Œå¦‚æœä½ æƒ³è¦çŸ¥é“`Box1`è¿™ä¸ªç›’å­é•¿å•¥æ ·ï¼Ÿé‚£ä¹ˆä½ å¾—å»çœ‹çœ‹å®ƒçš„`class`é‡Œè¾¹çš„`render`æ˜¯æ€ä¹ˆå†™çš„ï¼åŒç†ï¼Œ`Box2`ä¹Ÿæ˜¯å¦‚æ­¤ï¼è¿˜æœ‰å®ƒä»¬çš„åŠŸèƒ½ä»¥åŠçŠ¶æ€éƒ½åœ¨å®ƒä»¬å„è‡ªçš„`class`é‡Œè¾¹ï¼

ğŸ’¡ï¼šDOM diffï¼Ÿ

æ‰¾ä¸¤æ¬¡ render ç»“æœä¸åŒä¹‹å¤„è¿™ä¸ªè¿‡ç¨‹å«åšã€ŒDOM diffã€ï¼Œè‡³äºæ˜¯å¦‚ä½•å»å¯¹æ¯”çš„ï¼Œæˆ‘ä»¬æ— é¡»å»æ“å¿ƒï¼åæ­£å°±æ˜¯èƒ½æ‰¾åˆ°å˜åŒ–çš„ä½ç½®ï¼

![DOM diff](assets/img/2020-12-30-17-00-36.png)

> ææ¸…æ¥šè‚¤æµ…çš„ä¸œè¥¿ï¼Œå†å»ç†è§£æ·±çš„ä¸œè¥¿ï¼Œå¦‚ã€ŒDOM diffã€ç®—æ³•è¿™ç§æ·±çš„ä¸œè¥¿ï¼Œæ— é¡»å½“ä¸‹å»ç†è§£ï¼Œå½“ä½ å»æ‰¾ 20k ä»¥ä¸Šçš„å·¥ä½œæ—¶ï¼Œå€’æ˜¯å¯ä»¥å»ç†è§£ï¼Œä½† 10k ä»¥ä¸‹å°±ç®—äº†ï¼

å¦‚æœä½ éå¾—ææ¸…æ¥šæ·±çš„ä¸œè¥¿ï¼Œæˆ‘åªèƒ½è¯´ã€Œç­‰ä½ ææ¸…æ¥šï¼ˆéœ€è¦å‡ ä¸ªæœˆçš„æ—¶é—´ï¼‰ï¼Œä½ æ—©å°±é¥¿æ­»äº†â€¦â€¦ã€ï¼Œå…ˆæœ‰é’±ã€èƒ½æ´»å†å»å­¦ä¹ æ·±å…¥çš„ä¸œè¥¿

ğŸ’¡ï¼š`setState`è¿™ä¸ª API çš„å…¶å®ƒå‚æ•°ï¼Ÿ

``` js
this.setState((state, props) => {
  return {counter: state.counter + props.step};
});
```

ä¼ `props`æ˜¯ä¸ºäº†æ‹¿åˆ°æœ€æ–°çš„`props`å€¼ï¼

â¹ï¼š[React.Component â€“ React](https://zh-hans.reactjs.org/docs/react-component.html#setstate)

---

ç”¨äº†`class`ç»„ä»¶å®ç°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæ˜¾ç„¶ä»£ç æ›´æ¨¡å—åŒ–äº†â€¦â€¦

## â˜…äº†è§£æ›´å¤š

â¹ï¼š[React - setState æºç åˆ†æï¼ˆå°ç™½å¯è¯»ï¼‰](https://juejin.cn/post/6844903573453537287)

â¹ï¼š[ç¬¬ 18 é¢˜ï¼šReact ä¸­ setState ä»€ä¹ˆæ—¶å€™æ˜¯åŒæ­¥çš„ï¼Œä»€ä¹ˆæ—¶å€™æ˜¯å¼‚æ­¥çš„ï¼Ÿ Â· Issue #17 Â· Advanced-Frontend/Daily-Interview-Question](https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/17)

## â˜…æ€»ç»“

- å…³äº React çš„ä¸¤ç§ç»„ä»¶ï¼š
  - å‡½æ•°ç»„ä»¶ -> åŠŸèƒ½å•ä¸€
  - `class` ç»„ä»¶ -> æœ‰å¾ˆå¤šè§„å®š
  - å‚æ•°ï¼šå¤–è¾¹ç”¨`props`ï¼Œé‡Œè¾¹ç”¨`state`
