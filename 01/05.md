### âœï¸ Tangxt â³ 2021-01-29 ğŸ·ï¸ redux

# 05-Redux æ˜¯ä»€ä¹ˆ

## â˜…è¯¾ä»¶

å¸¦ä½ çœ‹æ‡‚ Redux çš„æ–‡æ¡£å’Œä¾‹å­ã€‚

ä¾‹å­ï¼š<https://redux.js.org/introduction/examples>

æ³¨æ„å‡ ä¸ªé—®é¢˜

1. Redux ä¸€å®šè¦è·Ÿ React ä¸€èµ·ç”¨å—ï¼Ÿ
2. Redux æ€ä¹ˆè·Ÿ React ä¸€èµ·ç”¨ï¼Œæœ‰å“ªäº›é‡è¦æ¦‚å¿µï¼Ÿ
3. Redux å’Œ React ä¸€èµ·ç”¨æœ‰ä»€ä¹ˆä¸æ–¹ä¾¿ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦ react-reduxï¼Ÿ

## â˜…é‡è¦ API

1ï¼‰Redux

1ã€Reducer å‡½æ•°

> æ–‡æ¡£ï¼š<https://cn.redux.js.org/docs/basics/Reducers.html>

``` js
const reducer = (state, action) => {
  if (state === undefined) {
    return {
      n: 0
    }
  } else {
    if (action.type === 'add') {
      var newState = {
        n: state.n + action.payload
      }
      return newState
    } else {
      return state
    }
  }
}
```

2ã€store

``` js
const store = createStore(reducer)
```

3ã€store.subscribe

``` js
store.subscribe(() => {
  render()
})
```

4ã€store.dispatch

``` js
store.dispatch({
  type: 'add',
  payload: 1
})
```

2ï¼‰React-Redux

1ã€Provider æ ‡ç­¾

``` jsx
<Provider store={store}>
  <App />
</Provider>, 
```

2ã€connect å‡½æ•°

``` js
function mapStateToProps(state) {
  return {
    n: state.n
  }
}

function mapDispatchToProps(dispatch) {
  return {
    add1: () => dispatch({
      type: 'add',
      payload: 1
    })
  }
}

export default connect(mapStateToProps, mapDispatchToProps)(App);
```

## â˜…VanillaJS

