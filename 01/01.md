### âœï¸ Tangxt â³ 2020-12-25 ğŸ·ï¸ è¯ç”Ÿ

# 01-React çš„è¯ç”Ÿ

## â˜…è¯¾ä»¶

ä»£ç ï¼š<http://jsbin.com/piwazag/1/edit?html,js,output>

1. React çš„åˆè¡·ï¼Ÿ
2. createElement
3. JSX
4. [Babel Online](https://babeljs.io/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=DwEwlgbgBAxgNgQwM5ILwHIAOCBOBTAOwBd0A-AKCiqmCWwNkRQ3xDIG8CBXAWwCM8OAL7AA9HQQEK1Gny5EiAewbKAwnDAwA1qnZqN2gELylBIaQDUYuQuXTqwG6aj7NOvQXVvjtggCZzAFprEztyMXAIUiA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=false&presets=es2015%2Ces2016%2Ces2017%2Creact%2Cstage-0%2Cstage-1%2Cstage-2%2Cstage-3%2Ces2015-loose%2Cenv&prettier=true&targets=&version=6.26.0&envVersion=1.6.2)

![React åšäº†ä»€ä¹ˆ](assets/img/2020-12-25-15-54-25.png)

## â˜…React çš„è¯ç”Ÿ

> ä¸ºä»€ä¹ˆè¯´ React æ˜¯å…ˆè¿›çš„ã€ç”Ÿäº§åŠ›çš„ä»£è¡¨ï¼Ÿ

React æœ€é‡è¦çš„ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯å…³äº `createElement` è¿™éƒ¨åˆ†å†…å®¹ï¼

1ï¼‰åŸç”Ÿ JS

éœ€æ±‚ï¼šåŠ  1 å‡ 1

![åŠ  1 å‡ 1](assets/img/2020-12-27-17-00-16.png)

å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Œæ˜¾ç„¶éœ€è¦ç”¨åˆ° DOM APIï¼Œå¦‚éœ€è¦è·å–å…ƒç´ ç­‰â€¦â€¦ä¹‹åï¼Œä½ ç”¨äº† React ï¼Œä½ å°±ä¼šæ˜ç™½ä½ è¢«é¢ è¦†äº†â€¦â€¦

ä»£ç å®ç°ï¼š

![ä»£ç  1](assets/img/2020-12-27-17-31-17.png)

ç”¨å›¾è¡¨ç¤ºä»¥ä¸Šä»£ç åœ¨å¹²ä»€ä¹ˆâ€¦â€¦

**ç¨‹åºæœ€é‡è¦çš„ä¸¤ä¸ªèƒ½åŠ›ï¼Œä¸€ä¸ªæ˜¯ç†è§£åŠ›ï¼Œå¦ä¸€ä¸ªå°±æ˜¯æŠ½è±¡**ã€‚ä½ éœ€è¦æŠŠä¸Šè¿°çš„è¿è¡Œç»“æœè¿™æ ·å…·ä½“çš„ä¸œè¥¿ï¼ŒæŠ½è±¡æˆä¸å…·ä½“çš„ä¸œè¥¿

æŠ½è±¡çš„åä¹‰è¯å°±æ˜¯å…·ä½“ï¼Œè€Œæˆ‘ä»¬ä¸éœ€è¦å…·ä½“ï¼Œæˆ‘ä»¬è¦çš„æ˜¯ã€ŒæŠ½è±¡ã€

é‚£å¦‚ä½•æŠ½è±¡å‘¢ï¼Ÿ

ç®€å•å›é¡¾æ•´ä¸ªä»£ç è¿è¡Œé€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•´ä¸ªè¿‡ç¨‹ï¼Œåˆ†ä¸ºä¸¤å—ï¼š

* é¡µé¢
* JS

æˆ‘ä»¬é€è¿‡ `innerText` ä»é¡µé¢ä¸­æŠŠæ•°æ®æå–åˆ° JS ä¸­ï¼Œç„¶åé€šè¿‡é‚£ä¸¤ä¸ª `+1/-1` æŒ‰é’®ï¼Œè¿˜æ˜¯é€è¿‡ `innerText = ` æŠŠæ•°æ®å›å¡«åˆ°é¡µé¢ä¸­ï¼

è¿™ä¸ªä»£ç è¿è¡Œé€»è¾‘å¹¶ä¸å¤æ‚ï¼Œä½†æœ‰ç‚¹çƒ¦

![ä¸€æ¥ä¸€å›](assets/img/2020-12-27-17-44-45.png)

æ€»ä¹‹ï¼Œæˆ‘ä»¬å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Œæ€»å¾—åšè¿™ä¸€æ­¥ï¼šã€Œ**è·å–é¡µé¢æ•°æ®ï¼Œæ”¹æ•°æ®ï¼Œå›å¡«æ•°æ®åˆ°é¡µé¢**ã€ï¼Œè€Œè¿™ä¸€æ­¥æ˜¯æ— æ³•çœç•¥çš„ -> è¿™å°±æ˜¯ DOM æä¾›çš„æ–¹æ³•äº†ï¼

ç„¶è€Œå†™ React çš„ç¨‹åºå‘˜ï¼Œä¹Ÿå°±æ˜¯ä½œè€…ï¼Œè§‰å¾—è¿™ä¸ªè¿‡ç¨‹å¤ªæ™ºéšœäº†ï¼Œè™½ç„¶ä»£ç æŒºç®€å•çš„ï¼Œä½†å°±æ˜¯å¾ˆä¸çˆ½â€¦â€¦

è¯è¯´ï¼Œæœ‰å’©æœ‰ä¸€ç§æ›´ç®€ä¾¿çš„æ–¹æ³•å‘¢ï¼Ÿ

å¯ä»¥è¿™æ ·åšï¼šæŠŠä¸Šè¾¹çš„ `innerText` å¹²æ‰ï¼Œè€Œä¸‹è¾¹çš„ `innerText=` ä¸èƒ½å¹²æ‰ï¼Œä¸ç„¶ JS å°±æ— æ³•é€šçŸ¥é¡µé¢æ”¹æ•°æ®äº†ï¼

![ä¸å–åªå¡«](assets/img/2020-12-27-18-00-36.png)

å¸¦ç€è¿™æ ·çš„ç†å¿µï¼ŒReact å°±è¯ç”Ÿäº†â€¦â€¦

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠ±ç€è¿™ç§ç†å¿µï¼Œä½¿ç”¨ React é‡å†™è¿™ä¸ªéœ€æ±‚ï¼

2ï¼‰React åˆä½¿ç”¨

cdn å¼•ç”¨ä¸¤ä¸ªåº“ï¼š

* react
* react-dom

> é€‰æ‹© umdï¼Œumdï¼ˆUniversal Module Definitionï¼‰æ˜¯ AMD å’Œ CommonJS çš„ç³…åˆï¼Œè·¨å¹³å°ï¼ˆæµè§ˆå™¨ & æœåŠ¡ç«¯ï¼‰çš„è§£å†³æ–¹æ¡ˆ

ğŸ’¡ï¼šä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ä¸¤ä¸ªåº“ï¼Ÿ

React æ˜¯ä¸€ä¸ªéå¸¸å‰å®³çš„åº“ï¼ŒFacebook çš„ç‰›äººå†™çš„ã€‚å®ƒèƒ½**è®©é¡µé¢æ›´å¯æ§ï¼Œæ€§èƒ½æé«˜ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥å¾ˆç®€å•**ã€‚

**React DOM æ˜¯ç”¨æ¥æ“ä½œ DOM çš„**ï¼Œå› ä¸ºè¿™äº› DOM æ˜¯ç”¨ JSX å†™çš„ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªä¸“é—¨çš„åº“æ¥æ“ä½œã€‚

JSX æ˜¯å¯¹ JS çš„æ‰©å±•ï¼Œå®ƒçœ‹èµ·æ¥è·Ÿ XML å·®ä¸å¤šï¼Œå¯ä»¥ç”¨æ¥å†™ HTMLï¼Œä½ **å¯ä»¥è®¤ä¸º JSX æ˜¯ä¸€ç§æ›´ä¼˜é›…çš„ HTML å†™æ³•**ã€‚

â¹ï¼š[åœ¨ 2016 å¹´å­¦ JavaScript æ˜¯ä¸€ç§ä»€ä¹ˆæ ·çš„ä½“éªŒï¼Ÿ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/22782487)

---

ä¹‹å‰è¯´åˆ°ï¼Œé¡µé¢æ˜¯å’©æœ‰ä¸œè¥¿çš„ï¼Œå³ä½ ä¸ç”¨å†™è¿™ä¸ªäº†ï¼š

![é¡µé¢ç»“æ„](assets/img/2020-12-27-18-51-49.png)

æ‰€ä»¥æ­¤æ—¶çš„é¡µé¢ç»“æ„ï¼Œç›´æ¥è¿™æ ·ï¼š

``` html
<div id="app"></div>
```

å°±è¡Œäº†â€¦â€¦

å®Œæ•´ä»£ç ï¼š

``` html
<div id="app" class="container">
</div>
<button id="add" class="button is-primary"> + </button>
<button id="minus" class="button is-primary"> - </button>
<script src="https://cdn.bootcdn.net/ajax/libs/react/17.0.1/umd/react.development.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/react-dom/17.0.1/umd/react-dom.development.min.js"></script>
<script>
  let number = 0
  let span = React.createElement('span', {
    className: 'tag'
  }, number)
  ReactDOM.render(span, document.querySelector("#app"))

  let add = document.querySelector('#add')
  add.onclick = () => {
    number += 1
    let span = React.createElement('span', {
      className: 'tag'
    }, number)
    ReactDOM.render(span, document.querySelector("#app"))
  }
  let minus = document.querySelector('#minus')
  minus.onclick = () => {
    number -= 1
    let span = React.createElement('span', {
      className: 'tag'
    }, number)
    ReactDOM.render(span, document.querySelector("#app"))
  }
</script>
```

æ•ˆæœï¼š

![react 101](assets/img/2020-12-27-19-46-40.png)

æ€»ä¹‹ï¼Œæ ¹æ®ä¹‹å‰é‚£å¼ å›¾ï¼Œ**åªæœ‰ä» JS åˆ°é¡µé¢è¿™ä¸ªè¿‡ç¨‹ï¼Œæ²¡æœ‰é¡µé¢åˆ° JS è¿™ä¸ªè¿‡ç¨‹ï¼**

å½“ç„¶ï¼Œç›®å‰çš„ä»£ç è¿˜æ˜¯å¾ˆå‚»çš„ï¼ä¸è¿‡ï¼Œä½ è‡³å°‘æœ‰äº†**è¿™ç§æƒ³æ³•ã€Œåªæœ‰ä» JS åˆ°é¡µé¢çš„è¿‡ç¨‹ã€**

ä¼˜åŒ–ä¸€ä¸‹ä»£ç ï¼ˆæˆ‘ä¸é‡å¤ä¸å…±æˆ´å¤©ï¼‰ï¼š

``` js
let number = 0
render()

let add = document.querySelector('#add')
add.onclick = () => {
  number += 1
  render()
}
let minus = document.querySelector('#minus')
minus.onclick = () => {
  number -= 1
  render()
}

function render() {
  let span = React.createElement('span', {
    className: 'tag'
  }, number)
  ReactDOM.render(span, document.querySelector("#app"))
}
```

`number`ä¸º`0`å°±`render`ä¸€ä¸‹ï¼Œ`number`ä¸º`1`å°±`render`ä¸€ä¸‹â€¦â€¦`number`å˜äº†å°±`render`ä¸€ä¸‹ï¼

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è¦åšçš„å°±åªæœ‰æŠŠ`number`çš„å€¼æ”¹ä¸€ä¸‹ï¼Œç„¶å`render`ä¸€ä¸‹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¸åšä»»ä½•äº‹â€¦â€¦

ä»¥ä¸Šå°±æ˜¯ React çš„æ‰€æœ‰æ“ä½œäº†ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ²¡æœ‰ä»»ä½•æ“ä½œï¼

å¯ä»¥çœ‹åˆ°ï¼ŒReact çš„æ“ä½œï¼Œè®©æˆ‘ä»¬ä¸ç”¨å»ç†ä¼šå–å…ƒç´ çš„å„¿å­ã€çˆ¸çˆ¸ã€çˆ·çˆ·ç­‰å¤æ‚ç¹ççš„æ“ä½œäº†â€¦â€¦

3ï¼‰æŠŠæŒ‰é’®æ”¾åˆ°`#app`å®¹å™¨é‡Œè¾¹

è¦ç‚¹ï¼š

- äº‹ä»¶ç›‘å¬æ€ä¹ˆåšï¼Ÿ
- åŒçº§å¤šä¸ªå…ƒç´ æ€ä¹ˆåšï¼Ÿ

ä»£ç ï¼š

``` html
<div id="app" class="container">
</div>
<script src="https://cdn.bootcdn.net/ajax/libs/react/17.0.1/umd/react.development.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/react-dom/17.0.1/umd/react-dom.development.min.js"></script>
<script>
 let number = 0
 let onClickButton = ()=>{
   number += 1
   render()
 }
 let onClickButton2 = ()=>{
   number -= 1
   render()
 }

 render()

 function render() {
  let span = React.createElement('span',{className:'tag'},number)
  let button = React.createElement('button',{onClick:onClickButton,className:'button is-primary'},'+')
  let button2 = React.createElement('button',{onClick:onClickButton2,className:'button is-primary'},'-')
  let div = React.createElement('div',{className:"parent"},span,button,button2)
  ReactDOM.render(div,document.querySelector("#app"))
 }
</script>
```

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2020-12-27-20-59-31.png)

> ä¸ä¼šå…¨å±€æ›´æ–°ï¼Œåªä¼šå±€éƒ¨æ›´æ–°ï¼Œå“ªé‡Œå˜åŒ–äº†ï¼Œå°±ä¼šæ›´æ–°å“ªé‡Œï¼

å¯ä»¥çœ‹åˆ°æ•´ä¸ªé¡µé¢å†…å®¹ï¼Œéƒ½æ˜¯ JS æ¸²æŸ“çš„ï¼è€Œ React çš„å­˜åœ¨ï¼Œç®€åŒ–äº†æˆ‘ä»¬è¦å†™çš„å¾ˆå¤šä»£ç ï¼Œè€Œä¸”è¿™æ€§èƒ½è¦æ¯”æˆ‘ä»¬è‡ªå·±ç”¨åŸç”Ÿ DOM API è¦é«˜æ•ˆå¾—å¤šï¼

å¯¹æ¯”æˆ‘ä»¬ä¹‹å‰çš„åŸç”Ÿ JS ä»£ç ï¼Œç”¨äº† Reactï¼Œæ˜¾ç„¶è®©ä»£ç æ›´ç®€æ´ã€æ›´æ˜“æ‡‚äº†â€¦â€¦

å°ç»“ï¼š

- æ•°æ®å˜åŒ–ï¼Œå°±`render`ï¼Œæ•°æ®å˜åŒ–ï¼Œå°±`render`â€¦â€¦ç»“åˆä¸€å¼€å§‹é‚£ä¸ªè‰ç¨¿å›¾æ¥ç†è§£â€¦â€¦

æ¥ä¸‹æ¥ï¼Œå¯¹è¿™ä¸ª`render`å‡½æ•°æ¥ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„ä¼˜åŒ–ï¼

ğŸ’¡ï¼šåœ¨ HTML å…ƒç´ ä¸Šå†™`click`äº‹ä»¶ï¼Ÿ

``` html
<button onclick="myFunction()">Click me</button>
```

â¹ï¼š[HTML onclick Event Attribute](https://www.w3schools.com/tags/ev_onclick.asp)

ğŸ’¡ï¼šåœ¨ React ä¸­ï¼Œå¦‚ä½•å†™å¤šä¸ª`class`ï¼Œæ˜¯ç”¨`classList`å—ï¼Ÿ

ç›´æ¥`{className: 'class1 class2'}`å°±å¥½äº†ï¼

â¹ï¼š[javascript - Toggle Class in React - Stack Overflow](https://stackoverflow.com/questions/36403101/toggle-class-in-react)

ğŸ’¡ï¼šæˆ‘åœ¨`div#app`é‡Œè¾¹å†™äº†ä¸€ä¸ª`<div>hi</div>`ï¼Œä½ è§‰å¾—è¿™ä¸ªå…ƒç´ ä¼šè¢«æ¸²æŸ“å—ï¼Ÿ

ç»“æœå¹¶å’©æœ‰è¢«æ¸²æŸ“ï¼`ReactDOM.render(div,document.querySelector("#app"))`è¿™ä¸ªæ“ä½œï¼ŒæŠŠ`div#app`æ——ä¸‹çš„å†…å®¹éƒ½ç»™è¦†ç›–äº†ï¼Œè¯¥`render`API çš„å®ç°ï¼Œå¹¶ä¸æ˜¯`appendChild`ï¼Œè€Œæ˜¯ç±»ä¼¼äº`innerHTML` è¿™æ ·

## â˜…jsx çš„å‘æ˜

ç›®å‰ï¼Œæˆ‘ä»¬ä»£ç çš„é—®é¢˜ï¼š

![render](assets/img/2020-12-28-17-38-52.png)

> è°è¿™æ ·å†™ï¼Œè°å‚»é€¼ï¼

æ‰€ä»¥ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ä¼˜åŒ–å®ƒå‘¢ï¼Ÿ -> åˆ†ä¸‰æ­¥èµ°

ç¬¬ä¸€æ­¥ï¼š

`React.createElement`æ—¢ç„¶æ¯æ¬¡éƒ½å†™ï¼Œé‚£ä¸ºä½•ä¸æŠŠå®ƒç¼©å°ä¸€ç‚¹å‘¢ï¼Ÿ

æ‰€ä»¥å°±æœ‰äº†è¿™æ ·çš„ä»£ç ï¼š

``` js
let h = React.createElement
```

è¿™æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ä¼˜åŒ–â€”â€”**æŠŠå‡½æ•°æ¢ä¸€ä¸ªåå­—**

ğŸ’¡ï¼šä¸ºä½•æŠŠè¿™ä¸ªå˜é‡å«åš`h`å‘¢ï¼Ÿå«`ele`ç­‰è¿™æ ·çš„å˜é‡åä¸è¡Œå—ï¼Ÿ

æ²¡æœ‰ä»€ä¹ˆç¼˜ç”±ï¼Œä¸€èˆ¬éƒ½å«`h`ï¼

> `h` ä»£è¡¨çš„æ˜¯ hyperscriptï¼ˆhyper å¯¹åº”ç€ HTML çš„ Hï¼‰ï¼Œå®ƒæœ¬èº«è¡¨ç¤ºçš„æ˜¯ "ç”Ÿæˆ HTML ç»“æ„çš„è„šæœ¬"ï¼Œå½“æˆ‘ä»¬æ­£åœ¨å¤„ç†ä¸€ä¸ªè„šæœ¬çš„æ—¶å€™ï¼Œåœ¨è™šæ‹Ÿ DOM èŠ‚ç‚¹ä¸­å»ä½¿ç”¨å®ƒè¿›è¡Œæ›¿æ¢å·²æˆä¸ºä¸€ç§æƒ¯ä¾‹ã€‚è¿™ä¸ªå®šä¹‰åŒæ—¶ä¹Ÿè¢«è¿ç”¨åˆ°å…¶ä»–çš„æ¡†æ¶æ–‡æ¡£ä¸­ï¼Œå¦‚ [Cycle.js - API reference (dom)](https://cycle.js.org/api/dom.html#api-h)

â¹ï¼š[åœ¨ Vue çš„ render æ–¹æ³•ä¸­ h æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ](https://learnku.com/vuejs/t/23288/what-does-h-mean-in-the-vue-render-method)

---

ç¬¬äºŒæ­¥ï¼šæŠŠå˜é‡å‡å°‘

![å‡å°‘å˜é‡](assets/img/2020-12-28-18-46-23.png)

> è®°ä½ä»£ç çš„å½¢å¼ï¼Œè¿™å½¢å¼å¯æ˜¯éå¸¸é‡è¦çš„

ç¬¬äºŒæ­¥çš„ä¼˜åŒ–â€”â€”**æŠŠä¸´æ—¶å˜é‡éƒ½ç»™åˆ æ‰ï¼Œç›´æ¥ç”¨`h`å‡½æ•°åµŒå¥—èµ·æ¥ï¼**

ç¬¬ä¸‰æ­¥ï¼š

è¿™æ˜¯ React æœ€èªæ˜çš„ä¸€æ­¥ï¼React å¼€å‘è€…çœ‹äº†ä¸Šè¿°çš„ä»£ç ï¼Œæƒ³åˆ°äº†æŸä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯è¿™ä¸ªä»£ç è·ŸæŸä¸ªä»£ç éå¸¸ç›¸ä¼¼ï¼Œç®€ç›´å°±æ˜¯ä¸€æ¨¡ä¸€æ ·çš„è¯´ï¼š

``` js
h('div',{className:"parent"},
  h('span',{className:'tag'},number),
  h('button',{onClick:onClickButton,className:'button is-primary'},'+'),
  h('button',{onClick:onClickButton2,className:'button is-primary'},'-')
)
```

``` html
<div class="parent">
  <span class="red">number</span>
  <button onClick=onClickButton>+</button>
  <button onClick=onClickButton2>-</button>
</div>
```

> å‡ºç°è¿™æ ·çš„`</span>`é—­åˆæ ‡ç­¾ï¼Œå°±æ˜¯ä»£è¡¨ç€`h()`çš„è¿™ä¸ª`)`ï¼ŒåŒç†ï¼Œ`h()`çš„`(`å°±æ˜¯å¼€æ ‡ç­¾`<span>`

è‡³æ­¤ï¼ŒReact çš„å‘æ˜è€…æƒŠè®¶åœ°å‘ç°ã€Œ**æˆ‘çš„ä»£ç å…¶å®è·Ÿæ ‡ç­¾æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«**ã€ï¼Œæ‰€ä»¥ã€Œæˆ‘ã€èƒ½å¦æƒ³ä¸€ç§åŠæ³•è®©æˆ‘ä»¬çš„ä½¿ç”¨è€…å†™ä¸‹è¾¹è¿™ç§ä»£ç ï¼š

``` html
<div class="parent">
  <span class="red">number</span>
  <button onClick=onClickButton>+</button>
  <button onClick=onClickButton2>-</button>
</div>
```

ç„¶åï¼Œã€Œæˆ‘ã€ç”¨ä¸€ä¸ªç¨‹åºç¿»è¯‘æˆè¿™ç§ä»£ç ï¼š

``` js
h('div',{className:"parent"},
  h('span',{className:'tag'},number),
  h('button',{onClick:onClickButton,className:'button is-primary'},'+'),
  h('button',{onClick:onClickButton2,className:'button is-primary'},'-')
)
```

å‘¢ï¼Ÿ

æ€äºè‡³æ­¤ï¼ŒReact ä½œè€…å°±å¼€å§‹å¹²äº†ï¼ä»–å†™äº†ä¸€ä¸ªç¨‹åºï¼Œå¯ä»¥æŠŠä¸Šè¾¹è¿™ç§è¯­æ³•ï¼Œä¹Ÿå°±æ˜¯`JSX`è¯­æ³•ï¼Œææˆæ˜¯ä¸‹è¾¹é‚£ç§ä»£ç ï¼

è¿™ä¸ªç¨‹åºå¯ä»¥å«åšã€Œ**JSX ç¿»è¯‘å™¨**ã€

> JSX è¯­æ³•ï¼šå¯ä»¥è®©æˆ‘ä»¬ç”¨ HTML çš„å½¢å¼æ¥å†™ JSï¼Œæ³¨æ„ï¼Œè¿™å¯ä¸æ˜¯åœ¨å†™ HTML å“ˆï¼

è¿™ä¸ª JSX è¯­æ³•å‡ºæ¥ä»¥åï¼Œå°±è¶Šæ¥è¶Šæµè¡Œäº†ï¼Œäºæ˜¯ï¼Œå¤§å®¶éƒ½å¾ˆå–œæ¬¢åƒå†™æ ‡ç­¾è¿™æ ·å»å†™ JS äº†ï¼Œè¿™ç§æ–¹æ³•ç”šæ˜¯ç®€ä¾¿ï¼Œä½†å®è´¨ä¸Šæˆ‘ä»¬æ˜¯åœ¨å†™ä¸‹è¾¹é‚£ä¸ª`hâ€¦â€¦`ä»£ç â€¦â€¦

ä¹‹åï¼Œè¿™ç§è¯­æ³•å°±è¢« Babel é‡‡çº³äº†ï¼Œäºæ˜¯ Babel å°±è‡ªå¸¦äº†å¯ä»¥ç¿»è¯‘è¿™ç§ JSX è¯­æ³•çš„åŠŸèƒ½äº†ï¼

ğŸ’¡ï¼š`<span class="red">number</span>`è¿™ä¸ª`number`æ˜¯å­—ç¬¦ä¸²ï¼Œå¯æˆ‘ä»¬è¦çš„æ˜¯`number`å˜é‡å‘€ï¼

å¾ˆç®€å•ï¼Œæˆ‘ä»¬è¦å˜é‡ï¼Œç›´æ¥åŠ ä¸ª`{}`åŒ…è£¹èµ·æ¥å°±å¥½äº†ï¼Œå¦‚`<span class="red">{number}</span>`ã€‚

åŒç†ï¼Œ`<button onClick=onClickButton>+</button>`çš„`onClickButton`ä¹Ÿæ˜¯è¢«å½“ä½œå­—ç¬¦ä¸²å¤„ç†çš„ï¼ˆä½ ç‚¹å‡»æŒ‰é’®ï¼Œå¹¶ä¸ä¼šè°ƒç”¨`onClickButton`è¿™ä¸ªå‡½æ•°ï¼‰ï¼Œè€Œæˆ‘ä»¬è¦çš„æ˜¯å‡½æ•°å˜é‡ï¼Œæ‰€ä»¥ä¹Ÿå¾—åŠ ä¸Šä¸ª`{}` -> `<button onClick={onClickButton}>+</button>`

`number`å’Œ`onClickButton`è¿™ä¸ªå˜é‡çš„å€¼æ˜¯**æ²¿ç€å½“å‰ä½œç”¨åŸŸé“¾å¾€ä¸Šæ‰¾çš„**â€¦â€¦

---

![Babel è½¬è¯‘ä»£ç ](assets/img/2020-12-28-23-39-33.png)

â¹ï¼š[Babel Â· The compiler for next generation JavaScript](https://babeljs.io/repl#?browsers=defaults%2C%20not%20ie%2011%2C%20not%20ie_mob%2011&build=&builtIns=false&spec=false&loose=false&code_lz=DwEwlgbgBAxgNgQwM5ILwCIAOCBOBTAOwBd0A-AKCimCWwNkRQ3xDIG8CBXAWwCM8cAX2AB6WggIUqwXpyJEA9vSUBhOGBgBrVG1XqtAITmKCg0gGpRs-UqnVrJqHo3bdBNS6M2CAJjMBaK2NbclFwCFIgA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=env%2Ces2015%2Ces2016%2Ces2017%2Creact%2Cstage-0%2Cstage-1%2Cstage-2%2Cstage-3%2Ces2015-loose&prettier=false&targets=&version=7.12.12&externalPlugins=)

è¿™å°±æ˜¯ React çš„æœ€åä¸€æ­¥ä¼˜åŒ–äº†ï¼Œå³ä½ å†™ JSX è¯­æ³•çš„ä»£ç ï¼Œå°±ç›¸å½“äºæ˜¯åœ¨å†™`React.createElement(â€¦â€¦)`è¿™æ ·ä¸€å¤§ä¸² JS è¯­æ³•äº†ï¼

å½“ç„¶ï¼Œæˆ‘ä»¬å†™çš„ JSX è¯­æ³•ä»£ç æ˜¯ä¸èƒ½è¿è¡Œçš„ï¼Œå› ä¸ºè¿™å¹¶ä¸æ˜¯åˆæ³•çš„è¯­æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ‰èƒ½è®©å®ƒåˆæ³•å‘¢ï¼Ÿ

æœ‰ä¸¤ç§åŠæ³•ï¼š

- ç¬¬ä¸€ç§ï¼šåŸºäº Webpack/Parcel ç­‰æ„å»ºå·¥å…·ï¼Œä½¿ç”¨ Babel æŠŠè¿™ä¸ªè¯­æ³•ç»™ç¿»è¯‘ä¸€ä¸‹ï¼
- ç¬¬äºŒç§ï¼šä¸€äº›çº¿ä¸Šç¼–è¾‘å·¥å…·ï¼Œå¦‚ jsbinâ€¦â€¦

![jsx è¯­æ³•](assets/img/2020-12-29-00-09-29.png)

ç»§ç»­ä¼˜åŒ–ä»£ç ï¼š

![ä»£ç ](assets/img/2020-12-29-00-16-46.png)

> èŠ³èŠ³å»ºè®®æŠŠ`class`å†™æˆæ˜¯`className`ï¼Œè™½ç„¶ä¸è¿™æ ·åšï¼Œä»£ç ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼Œä½†å¦‚æœé‡ä¸Šäº†æŠ¥é”™ï¼Œé‚£ä½ å°±å¾—å†™æˆ`className`è¿™æ ·äº†ï¼æ‰€ä»¥ï¼Œä¸ç®¡æ€æ ·éƒ½å»ºè®®å†™æˆ`className`è¿™æ ·

æœ‰äººè®¤ä¸ºä¸ºå•¥ä¸å†™æˆ`onClick={onClickButton()}`è¿™æ ·å‘¢ï¼Ÿå³åŠ ä¸ª`()`è¿™æ · -> ç‚¹å‡»æŒ‰é’®ï¼Œå°±æ‰§è¡Œå‡½æ•°â€¦â€¦

å…¶å®ä½ æ‹ä¸€æ‹å°±æ¸…æ¥šäº†ï¼Œä½ å¦‚æœåŠ ä¸Šï¼Œé‚£ä¹ˆç¿»è¯‘çš„ç»“æœï¼š

![ä¸åŠ æ‹¬å·](assets/img/2020-12-29-00-25-25.png)

> JSX è¯­æ³•çš„äº‹ä»¶ç›‘å¬å‡½æ•°å°±æ˜¯ä¸€ä¸ª `0x101` è¿™æ ·çš„å¼•ç”¨å€¼ï¼Œä¸ HTML é‡Œè¾¹çš„ `<button onclick="xxx()">Click me</button>`æ˜¯ä¸ä¸€æ ·çš„å½¢å¼ï¼

å›é¡¾æ•´ä¸ªè¿‡ç¨‹ï¼š

åŸç”Ÿ JS å§¿åŠ¿æ“ä½œ DOM çš„ä»£ç æ˜¯å¾ˆå¤æ‚çš„ï¼ˆç”¨ jQuery ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ï¼Œå½“ç„¶ï¼Œè¿™æ˜¯ç›¸è¾ƒäºä½¿ç”¨äº† JSX è¯­æ³•è€Œè¨€çš„ï¼

ä»¥å‰ç”¨åŸç”Ÿ JS æˆ– jQuery å†™ä»£ç çš„å§¿åŠ¿ï¼š

1. æŠŠå†…å®¹æ”¾åˆ°é¡µé¢ä¸Šå»
2. å¦‚æœè¦æ›´æ–°å†…å®¹ï¼Œå°±å¾—åˆ°é¡µé¢å–å¯¹åº”çš„å€¼ï¼Œå–åˆ°å€¼ä¹‹åï¼Œåšä¸€äº›å¤„ç†ï¼Œç„¶åå†å›ä¼ åˆ°é¡µé¢ä¸­å»ï¼
3. ä¸åœé‡å¤ 1ã€2 è¿™ä¸¤ä¸ªè¿‡ç¨‹

React çš„æƒ³æ³•ï¼š

é¡µé¢ä½ å…ˆç»™æˆ‘ç©ºç€ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªå¯¹è±¡æ¥è¡¨ç¤ºçš„ï¼

![render](assets/img/2020-12-29-00-36-09.png)

ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡æ”¾åˆ°é¡µé¢é‡Œè¾¹å»ï¼Œå¯¹è±¡çš„æŸä¸ªå†…å®¹æ›´æ–°äº†ï¼Œå°±å†æŠŠè¿™ä¸ªå¯¹è±¡æ”¾åˆ°é¡µé¢é‡Œè¾¹å»ï¼å¦‚æ­¤åå¤â€¦â€¦ -> **æ”¹å€¼ï¼Œæ¸²æŸ“ï¼Œæ”¹å€¼ï¼Œæ¸²æŸ“â€¦â€¦**ï¼Œæ²¡æœ‰ä»»ä½•å…¶å®ƒçš„æ“ä½œï¼Œå¦‚æ²¡æœ‰`innerText`è¿™æ ·çš„æ“ä½œï¼Œæ€»ä¹‹ï¼Œä½ å¯ä»¥å¿˜æ‰æ‰€æœ‰çš„ DOM APIï¼Œå½“ç„¶ï¼Œé™¤äº†æœ€åæŒ‚è½½çš„è¿™ä¸ª`document.querySelector("#app")`â€¦â€¦æ¯•ç«Ÿï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰æµè§ˆå™¨è¿™ä¸ªå¯¹è±¡è¦åœ¨é¡µé¢å“ªä¸ªä½ç½®æ¸²æŸ“ï¼

æ€»ä¹‹ï¼Œ`document.querySelector("#app")`æ˜¯å”¯ä¸€ç”¨åˆ°äº† DOM API çš„åœ°æ–¹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå°±æ²¡æœ‰ç”¨åˆ°å…¶å®ƒ DOM API äº†ã€‚

ä»¥ä¸Šå°±æ˜¯ React å®ç°æœ€åˆçš„æƒ³æ³•äº†ï¼Œä¸€å¥è¯æ€»ç»“ä¹‹ï¼š

> ç”±äº DOM API å¤ªéš¾ç”¨äº†ï¼Œæ‰€ä»¥ React ä¸æ‹©æ‰‹æ®µåœ°åšåˆ°äº†ä¸å»è®¿é—® DOM ï¼Œåªç”¨ä½ æ›´æ–°æ•°æ®æ„é€ å‡ºä¸ªè™šæ‹Ÿ DOM å°±å®Œäº‹å„¿äº†ï¼

ğŸ’¡ï¼šä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOMï¼Ÿ

å°±æ˜¯æˆ‘ä»¬å†™çš„é‚£ä¸ªçœ‹èµ·æ¥åƒ HTML çš„ JSX è¯­æ³•ä»£ç ï¼Œä¸ºå•¥å«è™šæ‹Ÿ DOM å‘¢ï¼Ÿå› ä¸º**å®ƒä¸æ˜¯çœŸæ­£çš„ DOM å•Š**ï¼æ‰€ä»¥å°±å«è™šæ‹Ÿ DOM äº†

ç®€å•æ¥è¯´ï¼Œè™šæ‹Ÿ DOM å°±æ˜¯ä¸çœŸå®çš„ DOMï¼Œè€Œã€Œä¸çœŸå®çš„ DOMã€å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ -> è™šæ‹Ÿ DOM å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ²¡æœ‰ä»»ä½•ç¥å¥‡ä¹‹å¤„ï¼š

![è™šæ‹Ÿ DOM](assets/img/2020-12-29-00-57-57.png)

## â˜…æ€»ç»“

æˆ‘ä»¬è§£å†³äº†ä¸€äº›æ‚¬è€Œä¸å†³çš„é—®é¢˜ï¼š

JSX æ˜¯ä»€ä¹ˆï¼Ÿ

> ç”¨ HTML çš„å½¢å¼æ¥å†™ JSï¼Œæ‰€ä»¥å°±å« JSX -> ä¸€ç§ JS çš„æ‰©å±•ï¼ŒX ä¸€èˆ¬å³æ‰©å±•çš„æ„æ€ï¼

è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿ

> éçœŸå®çš„ DOM å³è™šæ‹Ÿ DOMï¼Œä¸€èˆ¬ç”¨å¯¹è±¡æ¥è¡¨ç¤ºï¼Œè™šæ‹Ÿ DOM å°±æ˜¯ä¸€ä¸ªè¡¨ç¤º DOM èŠ‚ç‚¹çš„å¯¹è±¡

è¿™äº›æ¦‚å¿µéƒ½æŒºæ™ºéšœçš„ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ç‚¹å¤æ‚çš„åœ°æ–¹â€¦â€¦

---

å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ

çŸ¥é“äº†å…³äº React è¿™ä¸ªæƒ³æ³•æ˜¯æ€ä¹ˆæ¥çš„ï¼Œä¸‹ä¸€èŠ‚èŠ³èŠ³ä¼šè®²åˆ° ã€ŒReact çš„ç»„ä»¶ã€è¿™ä¸ªæƒ³æ³•æ˜¯æ€ä¹ˆæ¥çš„ï¼

Vue æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ

â¹ï¼š[Vue.js - Wikipedia](https://en.wikipedia.org/wiki/Vue.js)

â¹ï¼š[Vue.js è¿›é˜¶ã€1ã€‘Vue äº§ç”Ÿçš„èƒŒæ™¯ä¸æœªæ¥_CalmReason çš„åšå®¢-CSDN åšå®¢](https://blog.csdn.net/calmreason/article/details/82526054)

