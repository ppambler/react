### âœï¸ Tangxt â³ 2020-12-25 ğŸ·ï¸ è¯ç”Ÿ

# 01-React çš„è¯ç”Ÿ

## â˜…è¯¾ä»¶

ä»£ç ï¼š<http://jsbin.com/piwazag/1/edit?html,js,output>

1. React çš„åˆè¡·ï¼Ÿ
2. createElement
3. JSX
4. [Babel Online](https://babeljs.io/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=DwEwlgbgBAxgNgQwM5ILwHIAOCBOBTAOwBd0A-AKCiqmCWwNkRQ3xDIG8CBXAWwCM8OAL7AA9HQQEK1Gny5EiAewbKAwnDAwA1qnZqN2gELylBIaQDUYuQuXTqwG6aj7NOvQXVvjtggCZzAFprEztyMXAIUiA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=false&presets=es2015%2Ces2016%2Ces2017%2Creact%2Cstage-0%2Cstage-1%2Cstage-2%2Cstage-3%2Ces2015-loose%2Cenv&prettier=true&targets=&version=6.26.0&envVersion=1.6.2)

![React åšäº†ä»€ä¹ˆ](assets/img/2020-12-25-15-54-25.png)

## â˜…React çš„è¯ç”Ÿ

> ä¸ºä»€ä¹ˆè¯´ React æ˜¯å…ˆè¿›çš„ã€ç”Ÿäº§åŠ›çš„ä»£è¡¨ï¼Ÿ

React æœ€é‡è¦çš„ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯å…³äº `createElement` è¿™éƒ¨åˆ†å†…å®¹ï¼

1ï¼‰åŸç”Ÿ JS

éœ€æ±‚ï¼šåŠ  1 å‡ 1

![åŠ  1 å‡ 1](assets/img/2020-12-27-17-00-16.png)

å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Œæ˜¾ç„¶éœ€è¦ç”¨åˆ° DOM APIï¼Œå¦‚éœ€è¦è·å–å…ƒç´ ç­‰â€¦â€¦ä¹‹åï¼Œä½ ç”¨äº† React ï¼Œä½ å°±ä¼šæ˜ç™½ä½ è¢«é¢ è¦†äº†â€¦â€¦

ä»£ç å®ç°ï¼š

![ä»£ç  1](assets/img/2020-12-27-17-31-17.png)

ç”¨å›¾è¡¨ç¤ºä»¥ä¸Šä»£ç åœ¨å¹²ä»€ä¹ˆâ€¦â€¦

**ç¨‹åºæœ€é‡è¦çš„ä¸¤ä¸ªèƒ½åŠ›ï¼Œä¸€ä¸ªæ˜¯ç†è§£åŠ›ï¼Œå¦ä¸€ä¸ªå°±æ˜¯æŠ½è±¡**ã€‚ä½ éœ€è¦æŠŠä¸Šè¿°çš„è¿è¡Œç»“æœè¿™æ ·å…·ä½“çš„ä¸œè¥¿ï¼ŒæŠ½è±¡æˆä¸å…·ä½“çš„ä¸œè¥¿

æŠ½è±¡çš„åä¹‰è¯å°±æ˜¯å…·ä½“ï¼Œè€Œæˆ‘ä»¬ä¸éœ€è¦å…·ä½“ï¼Œæˆ‘ä»¬è¦çš„æ˜¯ã€ŒæŠ½è±¡ã€

é‚£å¦‚ä½•æŠ½è±¡å‘¢ï¼Ÿ

ç®€å•å›é¡¾æ•´ä¸ªä»£ç è¿è¡Œé€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•´ä¸ªè¿‡ç¨‹ï¼Œåˆ†ä¸ºä¸¤å—ï¼š

* é¡µé¢
* JS

æˆ‘ä»¬é€è¿‡ `innerText` ä»é¡µé¢ä¸­æŠŠæ•°æ®æå–åˆ° JS ä¸­ï¼Œç„¶åé€šè¿‡é‚£ä¸¤ä¸ª `+1/-1` æŒ‰é’®ï¼Œè¿˜æ˜¯é€è¿‡ `innerText = ` æŠŠæ•°æ®å›å¡«åˆ°é¡µé¢ä¸­ï¼

è¿™ä¸ªä»£ç è¿è¡Œé€»è¾‘å¹¶ä¸å¤æ‚ï¼Œä½†æœ‰ç‚¹çƒ¦

![ä¸€æ¥ä¸€å›](assets/img/2020-12-27-17-44-45.png)

æ€»ä¹‹ï¼Œæˆ‘ä»¬å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Œæ€»å¾—åšè¿™ä¸€æ­¥ï¼šã€Œè·å–é¡µé¢æ•°æ®ï¼Œæ”¹æ•°æ®ï¼Œå›å¡«æ•°æ®åˆ°é¡µé¢ã€ï¼Œè¿™ä¸€æ­¥æ˜¯æ— æ³•çœç•¥çš„ï¼Œè€Œè¿™å°±æ˜¯ DOM æä¾›çš„æ–¹æ³•äº†ï¼

ç„¶è€Œå†™ React çš„ç¨‹åºå‘˜ï¼Œä¹Ÿå°±æ˜¯ä½œè€…ï¼Œè§‰å¾—è¿™ä¸ªè¿‡ç¨‹å¤ªæ™ºéšœäº†ï¼Œè™½ç„¶ä»£ç æŒºç®€å•çš„ï¼Œä½†å°±æ˜¯å¾ˆä¸çˆ½â€¦â€¦

è¯è¯´ï¼Œæœ‰å’©æœ‰ä¸€ç§æ›´ç®€ä¾¿çš„æ–¹æ³•å‘¢ï¼Ÿ

å¯ä»¥è¿™æ ·åšï¼šæŠŠä¸Šè¾¹çš„ `innerText` å¹²æ‰ï¼Œè€Œä¸‹è¾¹çš„ `innerText=` ä¸èƒ½å¹²æ‰ï¼Œä¸ç„¶ JS å°±æ— æ³•é€šçŸ¥é¡µé¢æ”¹æ•°æ®äº†ï¼

![ä¸å–åªå¡«](assets/img/2020-12-27-18-00-36.png)

å¸¦ç€è¿™æ ·çš„ç†å¿µï¼ŒReact å°±è¯ç”Ÿäº†â€¦â€¦

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠ±ç€è¿™ç§ç†å¿µï¼Œä½¿ç”¨ React é‡å†™è¿™ä¸ªéœ€æ±‚ï¼

2ï¼‰React åˆä½¿ç”¨

cdn å¼•ç”¨ä¸¤ä¸ªåº“ï¼š

* react
* react-dom

> é€‰æ‹© umdï¼ˆUniversal Module Definitionï¼‰æ˜¯ AMD å’Œ CommonJS çš„ç³…åˆï¼Œè·¨å¹³å°ï¼ˆæµè§ˆå™¨ & æœåŠ¡ç«¯ï¼‰çš„è§£å†³æ–¹æ¡ˆ

ğŸ’¡ï¼šä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ä¸¤ä¸ªåº“ï¼Ÿ

React æ˜¯ä¸€ä¸ªéå¸¸å‰å®³çš„åº“ï¼ŒFacebook çš„ç‰›äººå†™çš„ã€‚å®ƒèƒ½**è®©é¡µé¢æ›´å¯æ§ï¼Œæ€§èƒ½æé«˜ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥å¾ˆç®€å•**ã€‚

**React DOM æ˜¯ç”¨æ¥æ“ä½œ DOM çš„**ï¼Œå› ä¸ºè¿™äº› DOM æ˜¯ç”¨ JSX å†™çš„ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªä¸“é—¨çš„åº“æ¥æ“ä½œã€‚

JSX æ˜¯å¯¹ JS çš„æ‰©å±•ï¼Œå®ƒçœ‹èµ·æ¥è·Ÿ XML å·®ä¸å¤šï¼Œå¯ä»¥ç”¨æ¥å†™ HTMLï¼Œä½ **å¯ä»¥è®¤ä¸º JSX æ˜¯ä¸€ç§æ›´ä¼˜é›…çš„ HTML å†™æ³•**ã€‚

â¹ï¼š[åœ¨ 2016 å¹´å­¦ JavaScript æ˜¯ä¸€ç§ä»€ä¹ˆæ ·çš„ä½“éªŒï¼Ÿ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/22782487)

---

ä¹‹å‰è¯´åˆ°ï¼Œé¡µé¢æ˜¯å’©æœ‰ä¸œè¥¿çš„ï¼Œå³ä½ ä¸ç”¨å†™è¿™ä¸ªäº†ï¼š

![é¡µé¢ç»“æ„](assets/img/2020-12-27-18-51-49.png)

æ‰€ä»¥æ­¤æ—¶çš„é¡µé¢ç»“æ„ï¼Œç›´æ¥è¿™æ ·ï¼š

``` html
<div id="app"></div>
```

å°±è¡Œäº†â€¦â€¦

å®Œæ•´ä»£ç ï¼š

``` html
<div id="app" class="container">
</div>
<button id="add" class="button is-primary"> + </button>
<button id="minus" class="button is-primary"> - </button>
<script src="https://cdn.bootcdn.net/ajax/libs/react/17.0.1/umd/react.development.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/react-dom/17.0.1/umd/react-dom.development.min.js"></script>
<script>
  let number = 0
  let span = React.createElement('span', {
    className: 'tag'
  }, number)
  ReactDOM.render(span, document.querySelector("#app"))

  let add = document.querySelector('#add')
  add.onclick = () => {
    number += 1
    let span = React.createElement('span', {
      className: 'tag'
    }, number)
    ReactDOM.render(span, document.querySelector("#app"))
  }
  let minus = document.querySelector('#minus')
  minus.onclick = () => {
    number -= 1
    let span = React.createElement('span', {
      className: 'tag'
    }, number)
    ReactDOM.render(span, document.querySelector("#app"))
  }
</script>
```

æ•ˆæœï¼š

![react 101](assets/img/2020-12-27-19-46-40.png)

æ€»ä¹‹ï¼Œæ ¹æ®ä¹‹å‰é‚£å¼ å›¾ï¼Œ**åªæœ‰ä» JS åˆ°é¡µé¢è¿™ä¸ªè¿‡ç¨‹ï¼Œæ²¡æœ‰é¡µé¢åˆ° JS è¿™ä¸ªè¿‡ç¨‹ï¼**

å½“ç„¶ï¼Œç›®å‰çš„ä»£ç è¿˜æ˜¯å¾ˆå‚»çš„ï¼ä¸è¿‡ï¼Œä½ è‡³å°‘æœ‰äº†**è¿™ç§æƒ³æ³•ã€Œåªæœ‰ä» JS åˆ°é¡µé¢çš„è¿‡ç¨‹ã€**

ä¼˜åŒ–ä¸€ä¸‹ä»£ç ï¼ˆæˆ‘ä¸é‡å¤ä¸å…±æˆ´å¤©ï¼‰ï¼š

``` js
let number = 0
render()

let add = document.querySelector('#add')
add.onclick = () => {
  number += 1
  render()
}
let minus = document.querySelector('#minus')
minus.onclick = () => {
  number -= 1
  render()
}

function render() {
  let span = React.createElement('span', {
    className: 'tag'
  }, number)
  ReactDOM.render(span, document.querySelector("#app"))
}
```

`number`ä¸º`0`å°±`render`ä¸€ä¸‹ï¼Œ`number`ä¸º`1`å°±`render`ä¸€ä¸‹â€¦â€¦`number`å˜äº†å°±`render`ä¸€ä¸‹ï¼

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è¦åšçš„å°±åªæœ‰æŠŠ`number`çš„å€¼æ”¹ä¸€ä¸‹ï¼Œç„¶å`render`ä¸€ä¸‹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¸åšä»»ä½•äº‹â€¦â€¦

ä»¥ä¸Šå°±æ˜¯ React çš„æ‰€æœ‰æ“ä½œäº†ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ²¡æœ‰ä»»ä½•æ“ä½œï¼

å¯ä»¥çœ‹åˆ°ï¼ŒReact çš„æ“ä½œï¼Œè®©æˆ‘ä»¬ä¸ç”¨å»ç†ä¼šå–å…ƒç´ çš„å„¿å­ã€çˆ¸çˆ¸ã€çˆ·çˆ·ç­‰å¤æ‚ç¹ççš„æ“ä½œäº†â€¦â€¦

3ï¼‰æŠŠæŒ‰é’®æ”¾åˆ°`#app`å®¹å™¨é‡Œè¾¹

è¦ç‚¹ï¼š

- äº‹ä»¶ç›‘å¬æ€ä¹ˆåšï¼Ÿ
- åŒçº§å¤šä¸ªå…ƒç´ æ€ä¹ˆåšï¼Ÿ

ä»£ç ï¼š

``` html
<div id="app" class="container">
</div>
<script src="https://cdn.bootcdn.net/ajax/libs/react/17.0.1/umd/react.development.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/react-dom/17.0.1/umd/react-dom.development.min.js"></script>
<script>
 let number = 0
 let onClickButton = ()=>{
   number += 1
   render()
 }
 let onClickButton2 = ()=>{
   number -= 1
   render()
 }

 render()

 function render() {
  let span = React.createElement('span',{className:'tag'},number)
  let button = React.createElement('button',{onClick:onClickButton,className:'button is-primary'},'+')
  let button2 = React.createElement('button',{onClick:onClickButton2,className:'button is-primary'},'-')
  let div = React.createElement('div',{className:"parent"},span,button,button2)
  ReactDOM.render(div,document.querySelector("#app"))
 }
</script>
```

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2020-12-27-20-59-31.png)

> ä¸ä¼šå…¨å±€æ›´æ–°ï¼Œåªä¼šå±€éƒ¨æ›´æ–°ï¼Œå“ªé‡Œå˜åŒ–äº†ï¼Œå°±ä¼šæ›´æ–°å“ªé‡Œï¼

å¯ä»¥çœ‹åˆ°æ•´ä¸ªé¡µé¢å†…å®¹ï¼Œéƒ½æ˜¯ JS æ¸²æŸ“çš„ï¼è€Œ React çš„å­˜åœ¨ï¼Œç®€åŒ–äº†æˆ‘ä»¬è¦å†™çš„å¾ˆå¤šä»£ç ï¼Œè€Œä¸”è¿™æ€§èƒ½è¦æ¯”æˆ‘ä»¬è‡ªå·±ç”¨åŸç”Ÿ DOM API è¦é«˜æ•ˆå¾—å¤šï¼

å¯¹æ¯”æˆ‘ä»¬ä¹‹å‰çš„åŸç”Ÿ JS ä»£ç ï¼Œç”¨äº† Reactï¼Œæ˜¾ç„¶è®©ä»£ç æ›´ç®€æ´ã€æ›´æ˜“æ‡‚äº†â€¦â€¦

å°ç»“ï¼š

- æ•°æ®å˜åŒ–ï¼Œå°±`render`ï¼Œæ•°æ®å˜åŒ–ï¼Œå°±`render`â€¦â€¦ç»“åˆä¸€å¼€å§‹é‚£ä¸ªè‰ç¨¿å›¾æ¥ç†è§£â€¦â€¦

æ¥ä¸‹æ¥ï¼Œå¯¹è¿™ä¸ª`render`å‡½æ•°æ¥ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„ä¼˜åŒ–ï¼

ğŸ’¡ï¼šåœ¨ HTML å…ƒç´ ä¸Šå†™`click`äº‹ä»¶ï¼Ÿ

``` html
<button onclick="myFunction()">Click me</button>
```

â¹ï¼š[HTML onclick Event Attribute](https://www.w3schools.com/tags/ev_onclick.asp)

ğŸ’¡ï¼šåœ¨ React ä¸­ï¼Œå¦‚ä½•å†™å¤šä¸ª`class`ï¼Œæ˜¯ç”¨`classList`å—ï¼Ÿ

ç›´æ¥`{className: 'class1 class2'}`å°±å¥½äº†ï¼

â¹ï¼š[javascript - Toggle Class in React - Stack Overflow](https://stackoverflow.com/questions/36403101/toggle-class-in-react)

ğŸ’¡ï¼šæˆ‘åœ¨`div#app`å†™äº†ä¸€ä¸ª`<div>hi</div>`ï¼Œä½ è§‰å¾—è¿™ä¸ªå…ƒç´ æˆ·ä¼šè¢«æ¸²æŸ“å—ï¼Ÿ

ç»“æœå¹¶å’©æœ‰è¢«æ¸²æŸ“ï¼`ReactDOM.render(div,document.querySelector("#app"))`è¿™ä¸ªæ“ä½œï¼ŒæŠŠ`div#app`æ——ä¸‹çš„å†…å®¹éƒ½ç»™è¦†ç›–äº†ï¼Œè¯¥`render`API çš„å®ç°ï¼Œå¹¶ä¸æ˜¯`appendChild`ï¼Œè€Œæ˜¯ç±»ä¼¼äº`innerHTML` è¿™æ ·

## â˜…jsx çš„å‘æ˜
